{"version":3,"file":"ngx-joyride.umd.js","sources":["../../src/models/joyride-step.class.ts","../../src/services/joyride-options.service.ts","../../src/services/joyride-steps-container.service.ts","../../src/models/joyride-error.class.ts","../../src/services/dom.service.ts","../../src/services/templates.service.ts","../../src/directives/joyride.directive.ts","../../src/services/document.service.ts","../../src/services/joyride-backdrop.service.ts","../../src/services/event-listener.service.ts","../../src/services/logger.service.ts","../../src/components/step/joyride-step.component.ts","../../src/services/step-drawer.service.ts","../../src/services/joyride-step.service.ts","../../../../node_modules/tslib/tslib.es6.js","../../../../node_modules/rxjs/_esm5/internal/util/errorObject.js","../../../../node_modules/rxjs/_esm5/internal/util/tryCatch.js","../../../../node_modules/rxjs/_esm5/internal/util/isFunction.js","../../../../node_modules/rxjs/_esm5/internal/config.js","../../../../node_modules/rxjs/_esm5/internal/util/hostReportError.js","../../../../node_modules/rxjs/_esm5/internal/Observer.js","../../../../node_modules/rxjs/_esm5/internal/util/isArray.js","../../../../node_modules/rxjs/_esm5/internal/util/isObject.js","../../../../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","../../../../node_modules/rxjs/_esm5/internal/Subscription.js","../../../../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","../../../../node_modules/rxjs/_esm5/internal/Subscriber.js","../../../../node_modules/rxjs/_esm5/internal/symbol/observable.js","../../../../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","../../../../node_modules/rxjs/_esm5/internal/util/EmptyError.js","../../../../node_modules/rxjs/_esm5/internal/operators/finalize.js","../../../../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","../../../../node_modules/rxjs/_esm5/internal/util/TimeoutError.js","../../../../node_modules/rxjs/_esm5/internal/operators/windowToggle.js","../../src/models/joyride-step-info.class.ts","../../src/services/joyride.service.ts","../../src/components/button/button.component.ts","../../src/components/close-button/close-button.component.ts","../../src/components/arrow/arrow.component.ts","../../src/joyride.module.ts"],"sourcesContent":["import { ViewContainerRef, TemplateRef, EventEmitter } from \"@angular/core\";\nimport { JoyrideStepComponent } from \"../components/step/joyride-step.component\";\nimport { Observable } from \"rxjs\";\n\nexport class JoyrideStep {\n    name: string;\n    route: string;\n    position: string;\n    title: Observable<string>;\n    text: Observable<string>;\n    stepContent: TemplateRef<any>;\n    stepContentParams: Object;\n    nextClicked: EventEmitter<any>;\n    prevCliked: EventEmitter<any>;\n    tourDone: EventEmitter<any>;\n    transformCssStyle: string;\n    isElementOrAncestorFixed: boolean;\n    targetViewContainer: ViewContainerRef;\n    stepInstance: JoyrideStepComponent;\n    delayEmitter?: EventEmitter<any>;\n    startsHidden = false; // the step is not rendered\n    startsInvisible = false; // the step is rendered but hidden to the user\n}","import { Injectable } from \"@angular/core\";\nimport { JoyrideOptions } from \"../models/joyride-options.class\";\n\nexport const DEFAULT_THEME_COLOR = \"#3b5560\";\nexport const STEP_DEFAULT_POSITION = \"bottom\";\n\n@Injectable()\nexport class JoyrideOptionsService {\n\n    private themeColor: string = DEFAULT_THEME_COLOR;\n    private stepDefaultPosition: string = STEP_DEFAULT_POSITION;\n    private logsEnabled: boolean = true;\n    private showCounter: boolean = true;\n    private showPrevButton: boolean = true;\n    public stepsOrder: string[] = [];\n    setOptions(options: JoyrideOptions) {\n        this.stepsOrder = options.steps;\n        this.stepDefaultPosition = options.stepDefaultPosition ? options.stepDefaultPosition : this.stepDefaultPosition;\n        this.logsEnabled = typeof options.logsEnabled !== 'undefined' ? options.logsEnabled : this.logsEnabled;\n        this.showCounter = typeof options.showCounter !== 'undefined' ? options.showCounter : this.showCounter;\n        this.showPrevButton = typeof options.showPrevButton !== 'undefined' ? options.showPrevButton : this.showPrevButton;\n        this.themeColor = options.themeColor ? options.themeColor : this.themeColor;\n    }\n\n    getBackdropColor() {\n        return this.hexToRgb(this.themeColor);\n    }\n\n    getThemeColor() {\n        return this.themeColor;\n    }\n\n    getStepDefaultPosition() {\n        return this.stepDefaultPosition;\n    }\n\n    getStepsOrder() {\n        return this.stepsOrder;\n    }\n\n    areLogsEnabled() {\n        return this.logsEnabled;\n    }\n\n    isCounterVisible() {\n        return this.showCounter;\n    }\n\n    isPrevButtonVisible() {\n        return this.showPrevButton;\n    }\n\n    private hexToRgb(hex: any): string {\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hex = hex.replace(shorthandRegex, (m: any, r: any, g: any, b: any) => {\n            return r + r + g + g + b + b;\n        });\n\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ?\n            `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\n    }\n}","import { Injectable } from \"@angular/core\";\nimport { JoyrideStep } from \"../models/joyride-step.class\";\nimport { Subject } from \"rxjs\";\nimport { JoyrideOptionsService } from \"./joyride-options.service\";\n\nconst ROUTE_SEPARATOR = '@';\n\n@Injectable()\nexport class JoyrideStepsContainerService {\n    private steps: JoyrideStep[];\n    private stepsOriginal: JoyrideStep[];\n    stepHasBeenModified: Subject<JoyrideStep> = new Subject<JoyrideStep>();\n\n    constructor(\n        private readonly stepOptions: JoyrideOptionsService\n    ) {\n        this.stepsOriginal = [];\n        this.steps = [];\n    }\n\n    get(index: number): JoyrideStep {\n        return this.steps[index];\n    }\n\n    getStepRoute(index: number) {\n        let stepsOrder = this.stepOptions.getStepsOrder();\n        let stepID = stepsOrder[index];\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : \"\";\n        return stepRoute;\n    }\n\n    getStepPosition(step: JoyrideStep): number {\n        return this.getStepIndex(step) + 1;\n    }\n\n    addStep(stepToAdd: JoyrideStep) {\n        let stepExist = this.stepsOriginal.filter(step => step.name === stepToAdd.name).length > 0;\n        if (!stepExist) this.stepsOriginal.push(stepToAdd);\n        else {\n            let stepIndexToReplace = this.stepsOriginal.findIndex(step => step.name === stepToAdd.name);\n            this.stepsOriginal[stepIndexToReplace] = stepToAdd;\n        }\n    }\n\n    getNumberOfSteps() {\n        let stepsOrder = this.stepOptions.getStepsOrder();\n        return stepsOrder.length;\n    }\n\n    setPosition(step: JoyrideStep, position: string) {\n        let index = this.getStepIndex(step);\n        this.steps[index].position = position;\n        this.stepHasBeenModified.next(this.steps[index]);\n    }\n\n    initSteps() {\n        this.steps = [];\n        this.stepsOriginal.forEach((step) => this.steps.push({ ...step }));\n        this.sortSteps();\n    }\n\n    private sortSteps() {\n        let orderedSteps: JoyrideStep[] = [];\n        let stepsOrder = this.stepOptions.getStepsOrder();\n\n        stepsOrder.forEach((stepID) => {\n            let step = this.steps.find((step) => step.name === this.getStepName(stepID));\n            if (step) orderedSteps.push(step);\n        });\n\n        this.steps = [...orderedSteps];\n    }\n\n    private getStepIndex(step: JoyrideStep) {\n        return this.steps.findIndex((s) => step.name + step.route === s.name + s.route);\n    }\n\n    private getStepName(stepID: string): string {\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\n        return stepName;\n    }\n}","export class JoyrideError extends Error {\n}","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\n@Injectable()\nexport class DomRefService {\n\n    private fakeDocument: Document = <Document>{ body: {}, documentElement: {} };\n    private fakeWindow: Window = <Window>{ document: this.fakeDocument};\n    constructor(\n        @Inject(PLATFORM_ID) private platformId: Object\n    ) { }\n    getNativeWindow(): Window {\n        if (isPlatformBrowser(this.platformId)) return window;\n        else return this.fakeWindow;\n    }\n\n    getNativeDocument() {\n        if (isPlatformBrowser(this.platformId)) return document;\n        else return this.fakeDocument;\n    }\n}","import { Injectable, TemplateRef } from \"@angular/core\";\n\n@Injectable()\nexport class TemplatesService {\n    private _prevButton: TemplateRef<any>;\n    private _nextButton: TemplateRef<any>;\n    private _doneButton: TemplateRef<any>;\n    private _counter: TemplateRef<any>;\n    \n    setPrevButton(template: TemplateRef<any>) {\n        this._prevButton = template;\n    }\n\n    getPrevButton() {\n        return this._prevButton;\n    }\n\n    setNextButton(template: TemplateRef<any>) {\n        this._nextButton = template;\n    }\n\n    getNextButton() {\n        return this._nextButton;\n    }\n\n    setDoneButton(template: TemplateRef<any>) {\n        this._doneButton = template;\n    }\n\n    getDoneButton() {\n        return this._doneButton;\n    }\n    setCounter(template: TemplateRef<any>) {\n        this._counter = template;\n    }\n\n    getCounter() {\n        return this._counter;\n    }\n}\n","import {\n    Directive,\n    ElementRef,\n    AfterViewInit,\n    Input,\n    ViewContainerRef,\n    TemplateRef,\n    Output,\n    EventEmitter,\n    Inject,\n    PLATFORM_ID\n} from '@angular/core';\nimport { JoyrideStep } from '../models/joyride-step.class';\nimport { JoyrideStepsContainerService } from '../services/joyride-steps-container.service';\nimport { JoyrideError } from '../models/joyride-error.class';\nimport { Router } from '@angular/router';\nimport { DomRefService } from '../services/dom.service';\nimport { isPlatformBrowser } from '@angular/common';\nimport { TemplatesService } from '../services/templates.service';\nimport { Observable, of } from 'rxjs';\n\nexport const NO_POSITION = 'NO_POSITION';\n\n@Directive({\n    selector: 'joyrideStep, [joyrideStep]'\n})\nexport class JoyrideDirective implements AfterViewInit {\n    @Input('joyrideStep')\n    name: string;\n\n    @Input()\n    nextStep?: string;\n\n    @Input()\n    title?: string | Observable<string>;\n\n    @Input()\n    text?: string | Observable<string>;\n\n    @Input()\n    stepPosition?: string = NO_POSITION;\n\n    @Input()\n    stepContent?: TemplateRef<any>;\n\n    @Input()\n    stepContentParams?: Object;\n\n    @Input()\n    prevTemplate?: TemplateRef<any>;\n\n    @Input()\n    nextTemplate?: TemplateRef<any>;\n\n    @Input()\n    doneTemplate?: TemplateRef<any>;\n\n    @Input()\n    counterTemplate?: TemplateRef<any>;\n\n    @Input()\n    startsHidden?: boolean;\n\n    @Input()\n    startsInvisible?: boolean;\n\n    @Input()\n    delayEmitter?: EventEmitter<any>;\n\n    @Output()\n    prev?: EventEmitter<any> = new EventEmitter<any>();\n\n    @Output()\n    next?: EventEmitter<any> = new EventEmitter<any>();\n\n    @Output()\n    done?: EventEmitter<any> = new EventEmitter<any>();\n\n    private windowRef: Window;\n\n    constructor(\n        private readonly joyrideStepsContainer: JoyrideStepsContainerService,\n        private viewContainerRef: ViewContainerRef,\n        private readonly domService: DomRefService,\n        private readonly router: Router,\n        private readonly templateService: TemplatesService,\n        @Inject(PLATFORM_ID) private platformId: Object\n    ) {\n        this.windowRef = this.domService.getNativeWindow();\n    }\n\n    ngAfterViewInit() {\n        if (!isPlatformBrowser(this.platformId)) return;\n        if (this.prevTemplate) this.templateService.setPrevButton(this.prevTemplate);\n        if (this.nextTemplate) this.templateService.setNextButton(this.nextTemplate);\n        if (this.doneTemplate) this.templateService.setDoneButton(this.doneTemplate);\n        if (this.counterTemplate) this.templateService.setCounter(this.counterTemplate);\n        let step = new JoyrideStep();\n        step.position = this.stepPosition;\n        step.targetViewContainer = this.viewContainerRef;\n        this.setAsyncText(step);\n        step.stepContent = this.stepContent;\n        step.stepContentParams = this.stepContentParams;\n        step.nextClicked = this.next;\n        step.prevCliked = this.prev;\n        step.tourDone = this.done;\n        if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\n        step.name = this.name;\n        step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\n        step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\n        step.isElementOrAncestorFixed =\n            this.isElementFixed(this.viewContainerRef.element) ||\n            this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\n        step.delayEmitter = this.delayEmitter;\n        step.startsHidden = this.startsHidden;\n        step.startsInvisible = this.startsHidden ? true : this.startsInvisible;\n        this.joyrideStepsContainer.addStep(step);\n    }\n\n    private isElementFixed(element: ElementRef) {\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\n    }\n\n    private setAsyncText(step: JoyrideStep) {\n        if (this.title instanceof Observable) {\n            step.title = this.title;\n        } else {\n            step.title = of(this.title);\n        }\n        if (this.text instanceof Observable) {\n            step.text = this.text;\n        } else {\n            step.text = of(this.text);\n        }\n    }\n\n    private isAncestorsFixed(nativeElement: any): boolean {\n        if (!nativeElement || !nativeElement.parentElement) return false;\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\n        if (nativeElement.nodeName === 'BODY') {\n            return isElementFixed;\n        }\n        if (isElementFixed) return true;\n        else return this.isAncestorsFixed(nativeElement.parentElement);\n    }\n}\n","import { Injectable, ElementRef } from '@angular/core';\nimport { DomRefService } from './dom.service';\n\n@Injectable()\nexport class DocumentService {\n    private documentHeight: number;\n\n    constructor(private readonly DOMService: DomRefService) {\n        this.setDocumentHeight();\n    }\n\n    getElementFixedTop(elementRef: ElementRef) {\n        return elementRef.nativeElement.getBoundingClientRect().top;\n    }\n\n    getElementFixedLeft(elementRef: ElementRef) {\n        return elementRef.nativeElement.getBoundingClientRect().left;\n    }\n\n    getElementAbsoluteTop(elementRef: ElementRef) {\n        var scrollOffsets = this.getScrollOffsets();\n        return elementRef.nativeElement.getBoundingClientRect().top + scrollOffsets.y;\n    }\n\n    getElementAbsoluteLeft(elementRef: ElementRef) {\n        var scrollOffsets = this.getScrollOffsets();\n        return elementRef.nativeElement.getBoundingClientRect().left + scrollOffsets.x;\n    }\n\n    setDocumentHeight() {\n        this.documentHeight = this.calculateDocumentHeight();\n    }\n\n    getDocumentHeight() {\n        return this.documentHeight;\n    }\n\n    getFirstScrollableParent(node: any) {\n        const regex = /(auto|scroll|overlay)/;\n\n        const style = (node: any, prop: any) =>\n            this.DOMService.getNativeWindow()\n                .getComputedStyle(node, null)\n                .getPropertyValue(prop);\n\n        const scroll = (node: any) => regex.test(style(node, 'overflow') + style(node, 'overflow-y') + style(node, 'overflow-x'));\n\n        const scrollparent = (node: any): any => {\n            return !node || node === this.DOMService.getNativeDocument().body\n                ? this.DOMService.getNativeDocument().body\n                : scroll(node)\n                ? node\n                : scrollparent(node.parentNode);\n        };\n\n        return scrollparent(node);\n    }\n\n    getElementsFromPoint(x: number, y: number) {\n        this.DOMService.getNativeDocument().elementsFromPoint(x, y);\n    }\n\n    isElementBeyondOthers(elementRef: ElementRef, isElementFixed: boolean, keywordToDiscard: string) {\n        const x1 = isElementFixed ? this.getElementFixedLeft(elementRef) : this.getElementAbsoluteLeft(elementRef);\n        const y1 = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\n        const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\n        const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\n\n        const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\n        const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\n\n        return (\n            this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !== elementRef.nativeElement ||\n            this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !== elementRef.nativeElement\n        );\n    }\n\n    private calculateDocumentHeight() {\n        const documentRef = this.DOMService.getNativeDocument();\n        return Math.max(\n            documentRef.body.scrollHeight,\n            documentRef.documentElement.scrollHeight,\n            documentRef.body.offsetHeight,\n            documentRef.documentElement.offsetHeight,\n            documentRef.body.clientHeight,\n            documentRef.documentElement.clientHeight\n        );\n    }\n\n    private getScrollOffsets() {\n        const winReference = this.DOMService.getNativeWindow();\n        const docReference = this.DOMService.getNativeDocument();\n\n        // This works for all browsers except IE versions 8 and before\n        if (winReference.pageXOffset != null) return { x: winReference.pageXOffset, y: winReference.pageYOffset };\n\n        // For IE (or any browser) in Standards mode\n        if (docReference.compatMode == 'CSS1Compat')\n            return {\n                x: docReference.documentElement.scrollLeft,\n                y: docReference.documentElement.scrollTop\n            };\n\n        // For browsers in Quirks mode\n        return { x: docReference.body.scrollLeft, y: docReference.body.scrollTop };\n    }\n\n    private getFirstElementWithoutKeyword(elements: Element[], keyword: string): Element {\n        while (elements[0] && elements[0].classList.toString().includes(keyword)) {\n            elements.shift();\n        }\n        return elements[0];\n    }\n}\n","import { Injectable, Renderer2, RendererFactory2, ViewContainerRef } from '@angular/core';\nimport { DocumentService } from './document.service';\nimport { Scroll } from './event-listener.service';\nimport { JoyrideOptionsService } from './joyride-options.service';\nimport { JoyrideStep } from '../models/joyride-step.class';\n\n@Injectable()\nexport class JoyrideBackdropService {\n    private renderer: Renderer2;\n    private currentBackdropContainer: any;\n    private lastBackdropContainer: any;\n    private backdropContent: any;\n    private backdropTop: any;\n    private backdropBottom: any;\n    private backdropMiddleContainer: any;\n    private backdropMiddleContent: any;\n    private leftBackdrop: any;\n    private targetBackdrop: any;\n    private rightBackdrop: any;\n    private elementRef: ViewContainerRef;\n    private targetAbsoluteTop: number;\n    private targetAbsoluteLeft: number;\n    private lastXScroll: number = 0;\n    private lastYScroll: number = 0;\n\n    constructor(\n        private readonly documentService: DocumentService,\n        private readonly optionsService: JoyrideOptionsService,\n        private readonly rendererFactory: RendererFactory2\n    ) {\n        this.setRenderer();\n    }\n\n    private setRenderer() {\n        this.renderer = this.rendererFactory.createRenderer(null, null);\n    }\n\n    draw(step: JoyrideStep) {\n        this.elementRef = step.targetViewContainer;\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n\n        this.currentBackdropContainer = this.renderer.createElement('div');\n        this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\n        this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\n        this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\n        this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\n        this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\n        this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\n        this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\n\n        this.backdropContent = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropContent, 'backdrop-content');\n        this.renderer.setStyle(this.backdropContent, 'position', 'relative');\n        this.renderer.setStyle(this.backdropContent, 'height', '100%');\n        this.renderer.setStyle(this.backdropContent, 'display', 'flex');\n        this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\n        this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\n\n        this.backdropTop = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\n        this.renderer.addClass(this.backdropTop, 'backdrop-top');\n        this.renderer.setStyle(this.backdropTop, 'width', '100%');\n        this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\n        this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\n\n        this.backdropMiddleContainer = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\n\n        this.backdropMiddleContent = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\n        this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\n        this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\n        this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\n\n        this.leftBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\n        this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\n        this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\n        this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\n\n        this.targetBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\n        this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\n\n        this.rightBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\n        this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\n        this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\n        this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\n\n        this.backdropBottom = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\n        this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\n        this.renderer.setStyle(this.backdropBottom, 'width', '100%');\n        this.renderer.setStyle(this.backdropBottom, 'height', '100%');\n        this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\n\n        this.removeLastBackdrop();\n        this.drawCurrentBackdrop();\n        this.lastBackdropContainer = this.currentBackdropContainer;\n    }\n\n    remove() {\n        this.removeLastBackdrop();\n    }\n\n    redrawTarget(step: JoyrideStep) {\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\n        this.handleVerticalScroll(step);\n        this.handleHorizontalScroll(step);\n    }\n\n    private getTargetTotalTop(step: JoyrideStep) {\n        let targetVC = step.targetViewContainer;\n        return step.isElementOrAncestorFixed\n            ? this.documentService.getElementFixedTop(targetVC.element)\n            : this.documentService.getElementAbsoluteTop(targetVC.element);\n    }\n\n    private getTargetTotalLeft(step: JoyrideStep) {\n        let targetVC = step.targetViewContainer;\n\n        return step.isElementOrAncestorFixed\n            ? this.documentService.getElementFixedLeft(targetVC.element)\n            : this.documentService.getElementAbsoluteLeft(targetVC.element);\n    }\n    redraw(step: JoyrideStep, scroll: Scroll) {\n        if (this.lastYScroll !== scroll.scrollY) {\n            this.lastYScroll = scroll.scrollY;\n            if (this.elementRef) {\n                this.handleVerticalScroll(step);\n            }\n        }\n        if (this.lastXScroll !== scroll.scrollX) {\n            this.lastXScroll = scroll.scrollX;\n            if (this.elementRef) {\n                this.handleHorizontalScroll(step);\n            }\n        }\n    }\n\n    private handleHorizontalScroll(step: JoyrideStep) {\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\n\n        if (newBackdropLeftWidth >= 0) {\n            this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\n            this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n        } else {\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\n        }\n    }\n\n    private handleTargetPartialWidth(newBackdropLeftWidth: number) {\n        this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\n        if (visibleTargetWidth >= 0) {\n            this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\n        } else {\n            this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\n        }\n    }\n\n    private handleVerticalScroll(step: JoyrideStep) {\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\n\n        if (newBackdropTopHeight >= 0) {\n            this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n        } else {\n            this.handleTargetPartialHeight(newBackdropTopHeight);\n        }\n    }\n\n    private handleTargetPartialHeight(newBackdropTopHeight: number) {\n        this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\n        if (visibleTargetHeight >= 0) {\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\n        } else {\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\n        }\n    }\n\n    private removeLastBackdrop() {\n        if (this.lastBackdropContainer) {\n            this.renderer.removeChild(document.body, this.lastBackdropContainer);\n            this.lastBackdropContainer = undefined;\n        }\n    }\n\n    private drawCurrentBackdrop() {\n        this.renderer.appendChild(document.body, this.currentBackdropContainer);\n    }\n}\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { DomRefService } from './dom.service';\n\nexport class Scroll {\n    scrollX: number;\n    scrollY: number;\n}\n\n@Injectable()\nexport class EventListenerService {\n    private renderer: Renderer2;\n    private scrollUnlisten: any;\n    private resizeUnlisten: any;\n\n    scrollEvent: Subject<Scroll> = new Subject<Scroll>();\n    resizeEvent: Subject<number> = new Subject<number>();\n\n    constructor(private readonly rendererFactory: RendererFactory2, private readonly DOMService: DomRefService) {\n        this.renderer = rendererFactory.createRenderer(null, null);\n    }\n\n    startListeningScrollEvents() {\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\n            this.scrollEvent.next({\n                scrollX: this.DOMService.getNativeWindow().pageXOffset,\n                scrollY: this.DOMService.getNativeWindow().pageYOffset\n            });\n        });\n    }\n\n    startListeningResizeEvents() {\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\n            this.resizeEvent.next(evt);\n        });\n    }\n\n    stopListeningScrollEvents() {\n        this.scrollUnlisten();\n    }\n\n    stopListeningResizeEvents() {\n        this.resizeUnlisten();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { JoyrideOptionsService } from './joyride-options.service';\n\nconst JOYRIDE = 'ngx-joyride:::';\n\n@Injectable()\nexport class LoggerService {\n\n    constructor(private readonly optionService: JoyrideOptionsService) { }\n\n    debug(message?: string, data: any = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.debug(JOYRIDE + message, data);\n        }\n    }\n\n    info(message?: string, data: any = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.info(JOYRIDE + message, data);\n        }\n    }\n\n    warn(message?: string, data: any = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.warn(JOYRIDE + message, data);\n        }\n    }\n\n    error(message?: string, data: any = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.error(JOYRIDE + message, data);\n        }\n    }\n\n}","import {\n    Component,\n    Input,\n    AfterViewInit,\n    ViewEncapsulation,\n    OnInit,\n    OnDestroy,\n    ElementRef,\n    ViewChild,\n    Renderer2,\n    Injector,\n    TemplateRef\n} from '@angular/core';\nimport { JoyrideStep } from '../../models/joyride-step.class';\nimport { JoyrideStepService, ARROW_SIZE, DISTANCE_FROM_TARGET, IJoyrideStepService } from '../../services/joyride-step.service';\nimport { JoyrideStepsContainerService } from '../../services/joyride-steps-container.service';\nimport { EventListenerService } from '../../services/event-listener.service';\nimport { Subscription, Observable } from 'rxjs';\nimport { DocumentService } from '../../services/document.service';\nimport { JoyrideOptionsService } from '../../services/joyride-options.service';\nimport { LoggerService } from '../../services/logger.service';\nimport { TemplatesService } from '../../services/templates.service';\n\nconst STEP_MIN_WIDTH = 200;\nconst STEP_MAX_WIDTH = 400;\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\nconst STEP_HEIGHT = 200;\nconst ASPECT_RATIO = 1.212;\nexport const DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\nexport const DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\n\n@Component({\n    selector: 'joyride-step',\n    templateUrl: './joyride-step.component.html',\n    styleUrls: ['./joyride-step.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class JoyrideStepComponent implements OnInit, OnDestroy, AfterViewInit {\n    stepWidth: number = STEP_MIN_WIDTH;\n    stepHeight: number = STEP_HEIGHT;\n    leftPosition: number;\n    topPosition: number;\n    showArrow: boolean = true;\n    arrowPosition: string;\n    arrowLeftPosition: number;\n    arrowTopPosition: number;\n    title: Observable<string>;\n    text: Observable<string>;\n    counter: string;\n    isCounterVisible: boolean;\n    isPrevButtonVisible: boolean;\n    themeColor: string;\n    customContent: TemplateRef<any>;\n    customPrevButton: TemplateRef<any>;\n    customNextButton: TemplateRef<any>;\n    customDoneButton: TemplateRef<any>;\n    customCounter: TemplateRef<any>;\n    counterData: any;\n    ctx: Object;\n\n    private arrowSize: number = ARROW_SIZE;\n    private stepAbsoluteLeft: number;\n    private stepAbsoluteTop: number;\n    private targetWidth: number;\n    targetHeight: number;\n    private targetAbsoluteLeft: number;\n    private targetAbsoluteTop: number;\n\n    private subscriptions: Subscription[] = [];\n    joyrideStepService: IJoyrideStepService;\n\n    private positionAlreadyFixed: boolean;\n    private documentHeight: number;\n\n    @Input() step?: JoyrideStep;\n    @ViewChild('stepHolder') stepHolder: ElementRef;\n    @ViewChild('stepContainer') stepContainer: ElementRef;\n\n    constructor(\n        private injector: Injector,\n        private readonly stepsContainerService: JoyrideStepsContainerService,\n        private readonly eventListenerService: EventListenerService,\n        private readonly documentService: DocumentService,\n        private readonly renderer: Renderer2,\n        private readonly logger: LoggerService,\n        private readonly optionsService: JoyrideOptionsService,\n        private readonly templateService: TemplatesService\n    ) {}\n\n    ngOnInit(): void {\n        // Need to Inject here otherwise you will obtain a circular dependency\n        this.joyrideStepService = this.injector.get(JoyrideStepService);\n\n        this.documentHeight = this.documentService.getDocumentHeight();\n        this.subscriptions.push(this.subscribeToResizeEvents());\n        this.title = this.step.title;\n        this.text = this.step.text;\n\n        this.setCustomTemplates();\n\n        this.counter = this.getCounter();\n        this.isCounterVisible = this.optionsService.isCounterVisible();\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\n        this.themeColor = this.optionsService.getThemeColor();\n\n        if (this.text) this.text.subscribe(val => this.checkRedraw(val));\n        if (this.title) this.title.subscribe(val => this.checkRedraw(val));\n    }\n\n    ngAfterViewInit() {\n        if (this.isCustomized()) {\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\n            this.updateStepDimensions();\n        } else {\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\n            let dimensions = this.getDimensionsByAspectRatio(\n                this.stepContainer.nativeElement.clientWidth,\n                this.stepContainer.nativeElement.clientHeight,\n                ASPECT_RATIO\n            );\n            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\n            this.stepWidth = dimensions.width;\n            this.stepHeight = dimensions.height;\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\n        }\n        this.drawStep();\n    }\n\n    private checkRedraw(val) {\n        if (val != null) {\n            // Need to wait that the change is rendered before redrawing\n            setTimeout(() => {\n                this.redrawStep();\n            }, 2);\n        }\n    }\n\n    private isCustomized() {\n        return (\n            this.step.stepContent ||\n            this.templateService.getCounter() ||\n            this.templateService.getPrevButton() ||\n            this.templateService.getNextButton() ||\n            this.templateService.getDoneButton()\n        );\n    }\n\n    private drawStep() {\n        let position = this.step.isElementOrAncestorFixed ? 'fixed' : 'absolute';\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\n        this.targetAbsoluteLeft =\n            position === 'fixed'\n                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)\n                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\n        this.targetAbsoluteTop =\n            position === 'fixed'\n                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)\n                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\n        this.setStepStyle();\n    }\n\n    private getCounter(): string {\n        let stepPosition = this.stepsContainerService.getStepPosition(this.step);\n        let numberOfSteps = this.stepsContainerService.getNumberOfSteps();\n        this.counterData = { step: stepPosition, total: numberOfSteps };\n        return stepPosition + '/' + numberOfSteps;\n    }\n\n    private setCustomTemplates() {\n        this.customContent = this.step.stepContent;\n        this.ctx = this.step.stepContentParams;\n        this.customPrevButton = this.templateService.getPrevButton();\n        this.customNextButton = this.templateService.getNextButton();\n        this.customDoneButton = this.templateService.getDoneButton();\n        this.customCounter = this.templateService.getCounter();\n    }\n\n    prev() {\n        this.joyrideStepService.prev();\n    }\n\n    next() {\n        this.joyrideStepService.next();\n    }\n\n    close() {\n        this.joyrideStepService.close();\n    }\n\n    isFirstStep() {\n        return this.joyrideStepService.isFirstStep();\n    }\n\n    isLastStep() {\n        return this.joyrideStepService.isLastStep();\n    }\n\n    private setStepStyle() {\n        switch (this.step.position) {\n            case 'top': {\n                this.setStyleTop();\n                break;\n            }\n            case 'bottom': {\n                this.setStyleBottom();\n                break;\n            }\n            case 'right': {\n                this.setStyleRight();\n                break;\n            }\n            case 'left': {\n                this.setStyleLeft();\n                break;\n            }\n            case 'center': {\n                this.setStyleCenter();\n                break;\n            }\n            default: {\n                this.setStyleBottom();\n            }\n        }\n    }\n\n    private setStyleTop() {\n        this.stepsContainerService.setPosition(this.step, 'top');\n        this.topPosition = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n        this.stepAbsoluteTop = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n        this.arrowTopPosition = this.stepHeight;\n\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n        this.adjustLeftPosition();\n        this.adjustRightPosition();\n        this.arrowPosition = 'bottom';\n        this.autofixTopPosition();\n    }\n\n    private setStyleRight() {\n        this.stepsContainerService.setPosition(this.step, 'right');\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n\n        this.leftPosition = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n        this.arrowLeftPosition = -this.arrowSize;\n        this.adjustTopPosition();\n        this.adjustBottomPosition();\n        this.arrowPosition = 'left';\n        this.autofixRightPosition();\n    }\n\n    private setStyleBottom() {\n        this.stepsContainerService.setPosition(this.step, 'bottom');\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n        this.arrowTopPosition = -this.arrowSize;\n\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.adjustLeftPosition();\n        this.adjustRightPosition();\n        this.arrowPosition = 'top';\n        this.autofixBottomPosition();\n    }\n\n    private setStyleLeft() {\n        this.stepsContainerService.setPosition(this.step, 'left');\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n\n        this.leftPosition = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n        this.arrowLeftPosition = this.stepWidth;\n        this.adjustTopPosition();\n        this.adjustBottomPosition();\n        this.arrowPosition = 'right';\n        this.autofixLeftPosition();\n    }\n\n    private setStyleCenter() {\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\n\n        this.updateStepDimensions();\n\n        this.renderer.setStyle(\n            this.stepHolder.nativeElement,\n            'transform',\n            `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`\n        );\n        this.showArrow = false;\n    }\n\n    private adjustLeftPosition() {\n        if (this.leftPosition < 0) {\n            this.arrowLeftPosition = this.arrowLeftPosition + this.leftPosition - DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n        }\n    }\n\n    private adjustRightPosition() {\n        let currentWindowWidth = document.body.clientWidth;\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\n            let newLeftPos =\n                this.leftPosition - (this.stepAbsoluteLeft + this.stepWidth + DEFAULT_DISTANCE_FROM_MARGIN_RIGHT - currentWindowWidth);\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\n\n            this.leftPosition = newLeftPos;\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\n        }\n    }\n\n    private adjustTopPosition() {\n        if (this.stepAbsoluteTop < 0) {\n            this.arrowTopPosition = this.arrowTopPosition + this.topPosition - DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n        }\n    }\n\n    private adjustBottomPosition() {\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\n            let newTopPos =\n                this.topPosition - (this.stepAbsoluteTop + this.stepHeight + DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM - this.documentHeight);\n            let deltaTopPosition = newTopPos - this.topPosition;\n\n            this.topPosition = newTopPos;\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\n        }\n    }\n\n    private autofixTopPosition() {\n        if (this.positionAlreadyFixed) {\n            this.logger.warn('No step positions found for this step. The step will be centered.');\n        } else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize < 0) {\n            this.positionAlreadyFixed = true;\n            this.setStyleRight();\n        }\n    }\n\n    private autofixRightPosition() {\n        if (this.targetAbsoluteLeft + this.targetWidth + this.stepWidth + this.arrowSize > document.body.clientWidth) {\n            this.setStyleBottom();\n        }\n    }\n\n    private autofixBottomPosition() {\n        if (this.targetAbsoluteTop + this.stepHeight + this.arrowSize + this.targetHeight > this.documentHeight) {\n            this.setStyleLeft();\n        }\n    }\n\n    private autofixLeftPosition() {\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\n            this.setStyleTop();\n        }\n    }\n\n    private subscribeToResizeEvents(): Subscription {\n        return this.eventListenerService.resizeEvent.subscribe(() => {\n            this.redrawStep();\n        });\n    }\n\n    private redrawStep() {\n        this.updateStepDimensions();\n        this.drawStep();\n    }\n\n    private getDimensionsByAspectRatio(width: number, height: number, aspectRatio: number) {\n        let calcHeight = (width + height) / (1 + aspectRatio);\n        let calcWidth = calcHeight * aspectRatio;\n        return {\n            width: calcWidth,\n            height: calcHeight\n        };\n    }\n    private adjustDimensions(width: number, height: number) {\n        let area = width * height;\n        let newWidth = width;\n        let newHeight = height;\n        if (width > STEP_MAX_WIDTH) {\n            newWidth = STEP_MAX_WIDTH;\n            newHeight = area / newWidth;\n        } else if (width < STEP_MIN_WIDTH) {\n            newWidth = STEP_MIN_WIDTH;\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\n        }\n        return {\n            width: newWidth,\n            height: newHeight\n        };\n    }\n\n    private updateStepDimensions() {\n        this.stepWidth = this.stepContainer.nativeElement.clientWidth;\n        this.stepHeight = this.stepContainer.nativeElement.clientHeight;\n    }\n\n    ngOnDestroy() {\n        this.subscriptions.forEach(subscription => {\n            subscription.unsubscribe();\n        });\n    }\n}\n","import {\n    Injectable,\n    ComponentRef,\n    ComponentFactoryResolver,\n    ApplicationRef,\n    Injector,\n    EmbeddedViewRef\n} from '@angular/core';\nimport {JoyrideStepComponent} from \"../components/step/joyride-step.component\";\nimport {JoyrideStep} from '../models/joyride-step.class';\n\n@Injectable()\nexport class StepDrawerService {\n\n    private refMap: { [key: string]: ComponentRef<JoyrideStepComponent>; } = {};\n\n    constructor(\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private injector: Injector\n    ) {\n    }\n\n    draw(step: JoyrideStep) {\n\n        // 1. Create a component reference from the component \n        const ref: ComponentRef<JoyrideStepComponent> = this.componentFactoryResolver\n            .resolveComponentFactory(JoyrideStepComponent)\n            .create(this.injector);\n\n        // 2. Attach component to the appRef so that it's inside the ng component tree\n        this.appRef.attachView(ref.hostView);\n\n        // 3. Get DOM element from component\n        const domElem = (ref.hostView as EmbeddedViewRef<any>)\n            .rootNodes[0] as HTMLElement;\n\n        if (step.delayEmitter) {\n            step.delayEmitter.subscribe(() => {\n                if (step.startsHidden) {\n                    domElem.hidden = false;\n                    setTimeout(() => {\n                        if (step.startsInvisible) {\n                            domElem.setAttribute(\"style\", \"visibility: visible\");\n                        }\n                    }, 500);\n                } else {\n                    domElem.setAttribute(\"style\", \"visibility: visible\");\n                }\n            });\n        }\n        if (step.startsInvisible) {\n            domElem.setAttribute(\"style\", \"visibility: hidden\");\n        }\n        if (step.startsHidden) {\n            domElem.hidden = true;\n        }\n\n        // 4. Append DOM element to the body\n        document.body.appendChild(domElem);\n\n        const instance: JoyrideStepComponent = ref.instance;\n        instance.step = step;\n        ref.changeDetectorRef.detectChanges();\n        step.stepInstance = instance;\n\n        this.refMap[step.name] = ref;\n\n    }\n\n    remove(step: JoyrideStep) {\n        this.appRef.detachView(this.refMap[step.name].hostView);\n        this.refMap[step.name].destroy();\n    }\n\n}","import { Injectable } from '@angular/core';\nimport { JoyrideStep } from '../models/joyride-step.class';\nimport { JoyrideBackdropService } from './joyride-backdrop.service';\nimport { EventListenerService } from './event-listener.service';\nimport { JoyrideStepsContainerService } from './joyride-steps-container.service';\nimport { DocumentService } from './document.service';\nimport { StepDrawerService } from './step-drawer.service';\nimport { DomRefService } from './dom.service';\nimport { NO_POSITION } from '../directives/joyride.directive';\nimport { JoyrideOptionsService } from './joyride-options.service';\nimport { Router } from '@angular/router';\nimport { ReplaySubject, Observable } from 'rxjs';\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\n\nconst SCROLLBAR_SIZE = 20;\nexport const DISTANCE_FROM_TARGET = 15;\nexport const ARROW_SIZE = 10;\n\nexport interface IJoyrideStepService {\n    startTour(): Observable<JoyrideStepInfo>;\n    close(): any;\n    prev(): any;\n    next(): any;\n    isFirstStep(): boolean;\n    isLastStep(): boolean;\n}\n\n@Injectable()\nexport class JoyrideStepService implements IJoyrideStepService {\n    private currentStepIndex: number;\n    private currentStep: JoyrideStep;\n\n    private winTopPosition: number = 0;\n    private winBottomPosition: number = 0;\n    private stepsObserver: ReplaySubject<JoyrideStepInfo> = new ReplaySubject<JoyrideStepInfo>();\n\n    constructor(\n        private readonly backDropService: JoyrideBackdropService,\n        private readonly eventListener: EventListenerService,\n        private readonly stepsContainerService: JoyrideStepsContainerService,\n        private readonly documentService: DocumentService,\n        private readonly DOMService: DomRefService,\n        private readonly stepDrawerService: StepDrawerService,\n        public optionsService: JoyrideOptionsService,\n        private readonly router: Router\n    ) {\n        this.initViewportPositions();\n        this.subscribeToScrollEvents();\n        this.subscribeToResizeEvents();\n    }\n\n    private initViewportPositions() {\n        this.winTopPosition = 0;\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n    }\n\n    private subscribeToScrollEvents() {\n        this.eventListener.startListeningScrollEvents();\n        this.eventListener.scrollEvent.subscribe(scroll => {\n            this.winTopPosition = scroll.scrollY;\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n            this.backDropService.redraw(this.currentStep, scroll);\n        });\n    }\n\n    private subscribeToResizeEvents() {\n        this.eventListener.resizeEvent.subscribe(() => {\n            this.backDropService.redrawTarget(this.currentStep);\n        });\n    }\n\n    private drawStep(step: JoyrideStep) {\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\n        this.stepDrawerService.draw(step);\n    }\n\n    startTour(): Observable<JoyrideStepInfo> {\n        this.stepsObserver = new ReplaySubject<JoyrideStepInfo>();\n        this.currentStepIndex = 0;\n        this.documentService.setDocumentHeight();\n        this.navigateToStepPage();\n        this.showStep('NEXT');\n        this.eventListener.startListeningResizeEvents();\n        this.subscribeToStepsUpdates();\n        return this.stepsObserver.asObservable();\n    }\n\n    close() {\n        this.removeCurrentStep();\n        this.notifyTourIsFinished();\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\n        this.eventListener.stopListeningResizeEvents();\n        this.backDropService.remove();\n    }\n\n    prev() {\n        this.removeCurrentStep();\n        this.currentStepIndex -= 1;\n        this.currentStep.prevCliked.emit();\n        this.navigateToStepPage();\n        this.showStep('PREV');\n    }\n\n    next() {\n        this.removeCurrentStep();\n        this.currentStepIndex += 1;\n        this.currentStep.nextClicked.emit();\n        this.navigateToStepPage();\n        this.showStep('NEXT');\n    }\n\n    isFirstStep() {\n        return this.currentStepIndex === 0;\n    }\n\n    isLastStep() {\n        return this.currentStepIndex === this.stepsContainerService.getNumberOfSteps() - 1;\n    }\n\n    private navigateToStepPage() {\n        let stepRoute = this.stepsContainerService.getStepRoute(this.currentStepIndex);\n        if (stepRoute) {\n            this.router.navigate([stepRoute]);\n        }\n    }\n\n    private subscribeToStepsUpdates() {\n        this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\n            if (this.currentStep.name === updatedStep.name) {\n                this.currentStep = updatedStep;\n            }\n        });\n    }\n\n    private showStep(action: 'PREV' | 'NEXT') {\n        setTimeout(() => {\n            this.stepsContainerService.initSteps();\n            this.currentStep = this.stepsContainerService.get(this.currentStepIndex);\n            // Scroll the element to get it visible if it's in a scrollable element\n            if (this.isParentScrollable(this.currentStep.targetViewContainer.element.nativeElement)) {\n                this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\n            }\n            this.scrollIfElementBeyondOtherElements();\n            this.backDropService.draw(this.currentStep);\n            this.drawStep(this.currentStep);\n            this.scrollIfStepAndTargetAreNotVisible();\n            this.notifyStepClicked(action);\n        }, 1);\n    }\n\n    private notifyStepClicked(action: 'PREV' | 'NEXT') {\n        let stepInfo: JoyrideStepInfo = {\n            number: this.currentStepIndex,\n            name: this.currentStep.name,\n            route: this.currentStep.route,\n            actionType: action\n        };\n        this.stepsObserver.next(stepInfo);\n    }\n\n    private notifyTourIsFinished() {\n        this.currentStep.tourDone.emit();\n        this.stepsObserver.complete();\n    }\n\n    private isParentScrollable(nativeElement: any) {\n        return this.documentService.getFirstScrollableParent(nativeElement) !== this.DOMService.getNativeDocument().body;\n    }\n\n    private removeCurrentStep() {\n        this.stepDrawerService.remove(this.currentStep);\n    }\n\n    private scrollIfStepAndTargetAreNotVisible() {\n        this.scrollWhenTargetOrStepAreHiddenBottom();\n        this.scrollWhenTargetOrStepAreHiddenTop();\n    }\n\n    private scrollWhenTargetOrStepAreHiddenBottom() {\n        let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\n        if (totalTargetBottom > this.winBottomPosition) {\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\n        }\n    }\n\n    private scrollWhenTargetOrStepAreHiddenTop() {\n        let totalTargetTop = this.getMaxTargetAndStepTopPosition();\n        if (totalTargetTop < this.winTopPosition) {\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\n        }\n    }\n\n    private getMaxTargetAndStepBottomPosition(): number {\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n        if (this.currentStep.position === 'top') {\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\n        } else if (this.currentStep.position === 'bottom') {\n            return (\n                targetAbsoluteTop +\n                this.currentStep.stepInstance.targetHeight +\n                this.currentStep.stepInstance.stepHeight +\n                ARROW_SIZE +\n                DISTANCE_FROM_TARGET\n            );\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n            return Math.max(\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight,\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2\n            );\n        }\n    }\n\n    private getMaxTargetAndStepTopPosition() {\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n        if (this.currentStep.position === 'top') {\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\n        } else if (this.currentStep.position === 'bottom') {\n            return targetAbsoluteTop;\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n            return Math.min(\n                targetAbsoluteTop,\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2\n            );\n        }\n    }\n\n    private scrollIfElementBeyondOtherElements() {\n        if (\n            this.documentService.isElementBeyondOthers(\n                this.currentStep.targetViewContainer.element,\n                this.currentStep.isElementOrAncestorFixed,\n                'backdrop'\n            )\n        ) {\n            this.DOMService.getNativeWindow().scrollTo(0, 0);\n        }\n\n        if (\n            this.documentService.isElementBeyondOthers(\n                this.currentStep.targetViewContainer.element,\n                this.currentStep.isElementOrAncestorFixed,\n                'backdrop'\n            )\n        ) {\n            this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n        }\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","// typeof any so that it we don't have to cast when comparing a result to the error object\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map\n","/** PURE_IMPORTS_START _errorObject PURE_IMPORTS_END */\nimport { errorObject } from './errorObject';\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nexport function tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n//# sourceMappingURL=tryCatch.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport var config = {\n    /**\n     * The promise constructor used by default for methods such as\n     * {@link toPromise} and {@link forEach}\n     */\n    Promise: undefined,\n    /**\n     * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n     * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n     * call in a try/catch block. It also enables producer interference, a nasty bug\n     * where a multicast can be broken for all observers by a downstream consumer with\n     * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n     * FOR MIGRATION REASONS.\n     */\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x != null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\nexport { UnsubscriptionError };\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_tryCatch,_util_errorObject,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { tryCatch } from './util/tryCatch';\nimport { errorObject } from './util/errorObject';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = /*@__PURE__*/ (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        /** @internal */\n        this._parent = null;\n        /** @internal */\n        this._parents = null;\n        /** @internal */\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    /** @internal */\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    /** @nocollapse */\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? /*@__PURE__*/ Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        /** @internal */ _this.syncErrorValue = null;\n        /** @internal */ _this.syncErrorThrown = false;\n        /** @internal */ _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriberSymbol]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriberSymbol]);\n}\n//# sourceMappingURL=Subscriber.js.map\n","/** Symbol.observable or a string \"@@observable\". Used for interop */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\nexport { ArgumentOutOfRangeError };\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nvar EmptyError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\nexport { EmptyError };\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\nexport function finalize(callback) {\n    return function (source) { return source.lift(new FinallyOperator(callback)); };\n}\nvar FinallyOperator = /*@__PURE__*/ (function () {\n    function FinallyOperator(callback) {\n        this.callback = callback;\n    }\n    FinallyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n    };\n    return FinallyOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FinallySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n//# sourceMappingURL=finalize.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\nexport { ObjectUnsubscribedError };\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nvar TimeoutError = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        _this.name = 'TimeoutError';\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\nexport { TimeoutError };\n//# sourceMappingURL=TimeoutError.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Subscription,_util_tryCatch,_util_errorObject,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { tryCatch } from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowToggle.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var result = clicks.windowToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * ).mergeAll();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\nexport function windowToggle(openings, closingSelector) {\n    return function (source) { return source.lift(new WindowToggleOperator(openings, closingSelector)); };\n}\nvar WindowToggleOperator = /*@__PURE__*/ (function () {\n    function WindowToggleOperator(openings, closingSelector) {\n        this.openings = openings;\n        this.closingSelector = closingSelector;\n    }\n    WindowToggleOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n    };\n    return WindowToggleOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowToggleSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_1 = contexts[index];\n                context_1.window.error(err);\n                context_1.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_2 = contexts[index];\n                context_2.window.complete();\n                context_2.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_3 = contexts[index];\n                context_3.window.unsubscribe();\n                context_3.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = tryCatch(closingSelector)(innerValue);\n            if (closingNotifier === errorObject) {\n                return this.error(errorObject.e);\n            }\n            else {\n                var window_1 = new Subject();\n                var subscription = new Subscription();\n                var context_4 = { window: window_1, subscription: subscription };\n                this.contexts.push(context_4);\n                var innerSubscription = subscribeToResult(this, closingNotifier, context_4);\n                if (innerSubscription.closed) {\n                    this.closeWindow(this.contexts.length - 1);\n                }\n                else {\n                    innerSubscription.context = context_4;\n                    subscription.add(innerSubscription);\n                }\n                this.destination.next(window_1);\n            }\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=windowToggle.js.map\n","export class JoyrideStepInfo {\n    number: number;\n    name: string;\n    route: string;\n    actionType: 'NEXT' | 'PREV';\n}","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { JoyrideStepService } from \"./joyride-step.service\";\nimport { JoyrideOptionsService } from './joyride-options.service';\nimport { JoyrideOptions } from '../models/joyride-options.class';\nimport { Observable, of } from 'rxjs';\nimport { finalize } from \"rxjs/operators\";\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\nimport { isPlatformBrowser } from '@angular/common';\n\n@Injectable()\nexport class JoyrideService {\n\n    private tourInProgress: boolean = false;\n    private tour$: Observable<JoyrideStepInfo>;\n\n    constructor(\n        @Inject(PLATFORM_ID) private platformId: Object,\n        public stepService: JoyrideStepService,\n        public optionsService: JoyrideOptionsService\n    ) { }\n\n    startTour(options?: JoyrideOptions): Observable<JoyrideStepInfo> {\n        if (!isPlatformBrowser(this.platformId)) {\n            return of(new JoyrideStepInfo());\n        }\n        if (!this.tourInProgress) {\n            this.tourInProgress = true;\n            if (options) {\n                this.optionsService.setOptions(options);\n            }\n            this.tour$ = this.stepService.startTour().pipe(\n                finalize(() => this.tourInProgress = false));\n            this.tour$.subscribe();\n        }\n        return this.tour$;\n    }\n\n    isTourInProgress(): boolean {\n        return this.tourInProgress;\n    }\n\n}\n","import { Component, Input, EventEmitter, Output } from \"@angular/core\";\n\n@Component({\n    selector: 'joyride-button',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.component.scss']\n})\nexport class JoyrideButtonComponent {\n    hover: boolean;\n    \n    @Input() \n    color: string;\n    \n    @Output()\n    clicked: EventEmitter<any> = new EventEmitter();\n\n    onClick() {\n        this.clicked.emit();\n    }\n}","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'joy-close-button',\n    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`\n})\n\nexport class JoyrideCloseButtonComponent { }","\nimport { Component, Input, ViewEncapsulation } from \"@angular/core\";\n\n@Component({\n    selector: 'joyride-arrow',\n    templateUrl: './arrow.component.html',\n    styleUrls: ['./arrow.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class JoyrideArrowComponent {\n    @Input()\n    position: string = 'top';\n}","import { NgModule, ModuleWithProviders } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { JoyrideDirective } from './directives/joyride.directive';\nimport { JoyrideService } from './services/joyride.service';\nimport { JoyrideStepComponent } from \"./components/step/joyride-step.component\";\nimport { JoyrideButtonComponent } from \"./components/button/button.component\";\nimport { JoyrideCloseButtonComponent } from \"./components/close-button/close-button.component\";\nimport { JoyrideStepService } from \"./services/joyride-step.service\";\nimport { JoyrideBackdropService } from \"./services/joyride-backdrop.service\";\nimport { JoyrideArrowComponent } from \"./components/arrow/arrow.component\";\nimport { EventListenerService } from \"./services/event-listener.service\";\nimport { JoyrideStepsContainerService } from \"./services/joyride-steps-container.service\";\nimport { DocumentService } from \"./services/document.service\";\nimport { JoyrideOptionsService } from './services/joyride-options.service';\nimport { StepDrawerService } from './services/step-drawer.service';\nimport { DomRefService } from './services/dom.service';\nimport { LoggerService } from './services/logger.service';\nimport { RouterModule } from \"@angular/router\";\nimport { TemplatesService } from \"./services/templates.service\";\n\nexport const routerModuleForChild: ModuleWithProviders = RouterModule.forChild([]);\n\n@NgModule({\n    imports: [CommonModule, routerModuleForChild],\n    declarations: [\n        JoyrideDirective,\n        JoyrideStepComponent,\n        JoyrideArrowComponent,\n        JoyrideButtonComponent,\n        JoyrideCloseButtonComponent\n    ],\n    entryComponents: [JoyrideStepComponent],\n    exports: [\n        JoyrideDirective\n    ]\n})\nexport class JoyrideModule {\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: JoyrideModule,\n            providers: [\n                JoyrideService,\n                JoyrideStepService,\n                JoyrideStepsContainerService,\n                JoyrideBackdropService,\n                EventListenerService,\n                DocumentService,\n                JoyrideOptionsService,\n                StepDrawerService,\n                DomRefService,\n                LoggerService,\n                TemplatesService\n            ]\n        }\n    }\n    static forChild(): ModuleWithProviders {\n        return {\n            ngModule: JoyrideModule,\n            providers: []\n        }\n    }\n}\n"],"names":["this","DEFAULT_THEME_COLOR","STEP_DEFAULT_POSITION","JoyrideOptionsService","options","stepsOrder","steps","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","themeColor","hexToRgb","hex","replace","m","r","g","b","result","exec","parseInt","Injectable","stepOptions","Subject","stepsOriginal","JoyrideStepsContainerService","index","stepID","getStepsOrder","includes","split","step","getStepIndex","stepToAdd","filter","name","length","stepIndexToReplace","findIndex","push","position","stepHasBeenModified","next","forEach","_this","sortSteps","orderedSteps","find","getStepName","s","route","__extends","Error","platformId","body","documentElement","document","fakeDocument","DomRefService","isPlatformBrowser","window","fakeWindow","__param","Inject","PLATFORM_ID","Object","TemplatesService","template","_prevButton","_nextButton","_doneButton","_counter","NO_POSITION","joyrideStepsContainer","viewContainerRef","domService","router","templateService","EventEmitter","windowRef","getNativeWindow","JoyrideDirective","prevTemplate","setPrevButton","nextTemplate","setNextButton","doneTemplate","setDoneButton","counterTemplate","setCounter","JoyrideStep","stepPosition","targetViewContainer","setAsyncText","stepContent","stepContentParams","nextClicked","prevCliked","prev","tourDone","done","JoyrideError","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","delayEmitter","startsHidden","startsInvisible","addStep","title","Observable","of","text","nodeName","__decorate","Input","TemplateRef","Output","Directive","selector","ViewContainerRef","Router","DOMService","setDocumentHeight","DocumentService","elementRef","getBoundingClientRect","top","left","scrollOffsets","getScrollOffsets","y","x","documentHeight","calculateDocumentHeight","node","regex","style","prop","getPropertyValue","scrollparent","getNativeDocument","test","scroll","parentNode","elementsFromPoint","keywordToDiscard","x1","getElementFixedLeft","getElementAbsoluteLeft","y1","getElementFixedTop","getElementAbsoluteTop","x2","width","y2","height","elements1","elements2","getFirstElementWithoutKeyword","documentRef","Math","max","scrollHeight","offsetHeight","clientHeight","winReference","docReference","pageXOffset","pageYOffset","compatMode","scrollLeft","scrollTop","elements","keyword","classList","toString","shift","documentService","optionsService","rendererFactory","setRenderer","JoyrideBackdropService","renderer","createRenderer","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","currentBackdropContainer","createElement","addClass","setStyle","backdropContent","appendChild","backdropTop","lastYScroll","getBackdropColor","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","lastXScroll","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeLastBackdrop","drawCurrentBackdrop","lastBackdropContainer","handleVerticalScroll","handleHorizontalScroll","targetVC","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","undefined","RendererFactory2","EventListenerService","scrollUnlisten","listen","evt","scrollEvent","resizeUnlisten","resizeEvent","JOYRIDE","optionService","LoggerService","message","data","areLogsEnabled","console","debug","info","warn","error","STEP_MIN_WIDTH","STEP_HEIGHT","injector","stepsContainerService","eventListenerService","logger","ARROW_SIZE","JoyrideStepComponent","joyrideStepService","get","JoyrideStepService","getDocumentHeight","subscriptions","subscribeToResizeEvents","setCustomTemplates","counter","getCounter","isCounterVisible","isPrevButtonVisible","getThemeColor","subscribe","val","checkRedraw","isCustomized","stepContainer","CUSTOM_STEP_MAX_WIDTH_VW","updateStepDimensions","STEP_MAX_WIDTH","dimensions","getDimensionsByAspectRatio","clientWidth","adjustDimensions","stepWidth","stepHeight","drawStep","setTimeout","redrawStep","getPrevButton","getNextButton","getDoneButton","stepHolder","targetWidth","targetHeight","setStepStyle","getStepPosition","numberOfSteps","getNumberOfSteps","counterData","total","customContent","ctx","customPrevButton","customNextButton","customDoneButton","customCounter","close","isFirstStep","isLastStep","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","setPosition","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","arrowTopPosition","leftPosition","stepAbsoluteLeft","arrowLeftPosition","arrowSize","adjustLeftPosition","adjustRightPosition","arrowPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","showArrow","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","aspectRatio","calcHeight","newWidth","newHeight","subscription","unsubscribe","ViewChild","ElementRef","Injector","Renderer2","componentFactoryResolver","appRef","StepDrawerService","ref","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","hidden","setAttribute","instance","changeDetectorRef","detectChanges","stepInstance","refMap","detachView","destroy","ComponentFactoryResolver","ApplicationRef","backDropService","eventListener","stepDrawerService","ReplaySubject","initViewportPositions","subscribeToScrollEvents","winTopPosition","winBottomPosition","innerHeight","startListeningScrollEvents","redraw","currentStep","redrawTarget","getStepDefaultPosition","draw","stepsObserver","currentStepIndex","navigateToStepPage","showStep","startListeningResizeEvents","subscribeToStepsUpdates","asObservable","removeCurrentStep","notifyTourIsFinished","scrollTo","stopListeningResizeEvents","remove","emit","stepRoute","getStepRoute","navigate","updatedStep","action","initSteps","isParentScrollable","scrollIntoView","scrollIfElementBeyondOtherElements","scrollIfStepAndTargetAreNotVisible","notifyStepClicked","stepInfo","number","actionType","complete","getFirstScrollableParent","scrollWhenTargetOrStepAreHiddenBottom","scrollWhenTargetOrStepAreHiddenTop","totalTargetBottom","getMaxTargetAndStepBottomPosition","scrollBy","totalTargetTop","getMaxTargetAndStepTopPosition","min","isElementBeyondOthers","extendStatics","d","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","tryCatchTarget","errorObject","e","tryCatcher","apply","arguments","tryCatch","fn","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","config","Promise","useDeprecatedSynchronousErrorHandling","value","stack","hostReportError","err","empty","closed","isArray","isObject","UnsubscriptionError","_super","errors","call","map","i","join","tslib_1.__extends","Subscription","_parent","_parents","_subscriptions","_unsubscribe","hasErrors","len","flattenUnsubscriptionErrors","sub","concat","add","teardown","EMPTY","_addParent","tmp","subscriptionIndex","indexOf","splice","parent","reduce","errs","rxSubscriber","Symbol","for","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","emptyObserver","isTrustedSubscriber","trustedSubscriber","rxSubscriberSymbol","SafeSubscriber","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","context","bind","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","obj","observable","FinallyOperator","callback","source","FinallySubscriber","stepService","JoyrideService","tourInProgress","setOptions","tour$","startTour","pipe","lift","JoyrideStepInfo","JoyrideButtonComponent","clicked","JoyrideCloseButtonComponent","Component","JoyrideArrowComponent","routerModuleForChild","RouterModule","forChild","JoyrideModule","ngModule","JoyrideModule_1","providers","NgModule","imports","CommonModule","declarations","entryComponents","exports"],"mappings":"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"}