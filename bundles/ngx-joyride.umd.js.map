{"version":3,"file":"ngx-joyride.umd.js","sources":["../../src/models/joyride-step.class.ts","../../src/services/joyride-options.service.ts","../../src/services/logger.service.ts","../../src/models/joyride-error.class.ts","../../src/services/joyride-steps-container.service.ts","../../src/services/dom.service.ts","../../src/services/templates.service.ts","../../src/directives/joyride.directive.ts","../../src/services/document.service.ts","../../src/services/joyride-backdrop.service.ts","../../src/services/event-listener.service.ts","../../src/components/step/joyride-step.component.ts","../../src/services/step-drawer.service.ts","../../src/services/joyride-step.service.ts","../../../../node_modules/tslib/tslib.es6.js","../../../../node_modules/rxjs/_esm5/internal/util/isFunction.js","../../../../node_modules/rxjs/_esm5/internal/config.js","../../../../node_modules/rxjs/_esm5/internal/util/hostReportError.js","../../../../node_modules/rxjs/_esm5/internal/Observer.js","../../../../node_modules/rxjs/_esm5/internal/util/isArray.js","../../../../node_modules/rxjs/_esm5/internal/util/isObject.js","../../../../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","../../../../node_modules/rxjs/_esm5/internal/Subscription.js","../../../../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","../../../../node_modules/rxjs/_esm5/internal/Subscriber.js","../../../../node_modules/rxjs/_esm5/internal/symbol/observable.js","../../../../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","../../../../node_modules/rxjs/_esm5/internal/Notification.js","../../../../node_modules/rxjs/_esm5/internal/util/EmptyError.js","../../../../node_modules/rxjs/_esm5/internal/operators/finalize.js","../../../../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","../../../../node_modules/rxjs/_esm5/internal/operators/windowToggle.js","../../src/services/joyride.service.ts","../../src/components/button/button.component.ts","../../src/components/close-button/close-button.component.ts","../../src/components/arrow/arrow.component.ts","../../src/joyride.module.ts"],"sourcesContent":["import { ViewContainerRef, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { JoyrideStepComponent } from '../components/step/joyride-step.component';\r\nimport { ReplaySubject } from 'rxjs';\r\n\r\nexport class JoyrideStep {\r\n    constructor() {\r\n        this.title = new ReplaySubject<string>();\r\n        this.text = new ReplaySubject<string>();\r\n    }\r\n    name: string;\r\n    route: string;\r\n    position: string;\r\n    title: ReplaySubject<string>;\r\n    text: ReplaySubject<string>;\r\n    stepContent: TemplateRef<any>;\r\n    stepContentParams: Object;\r\n    nextClicked: EventEmitter<any>;\r\n    prevCliked: EventEmitter<any>;\r\n    tourDone: EventEmitter<any>;\r\n    transformCssStyle: string;\r\n    isElementOrAncestorFixed: boolean;\r\n    targetViewContainer: ViewContainerRef;\r\n    stepInstance: JoyrideStepComponent;\r\n    delayEmitter?: EventEmitter<any>;\r\n    startsHidden = false; // the step is not rendered\r\n    startsInvisible = false; // the step is rendered but hidden to the user\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideOptions, CustomTexts, ICustomTexts } from '../models/joyride-options.class';\r\nimport { of, Observable } from 'rxjs';\r\n\r\nexport const DEFAULT_THEME_COLOR = '#3b5560';\r\nexport const STEP_DEFAULT_POSITION = 'bottom';\r\nexport const DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\r\n\r\nexport class ObservableCustomTexts implements ICustomTexts {\r\n    prev: Observable<string>;\r\n    next: Observable<string>;\r\n    done: Observable<string>;\r\n    close: Observable<string>;\r\n}\r\nexport const DEFAULT_TEXTS: ObservableCustomTexts = {\r\n    prev: of('prev'),\r\n    next: of('next'),\r\n    done: of('done'),\r\n    close: of(null)\r\n};\r\n\r\nexport interface IJoyrideOptionsService {\r\n    setOptions(options: JoyrideOptions): void;\r\n    getBackdropColor(): string;\r\n    getThemeColor(): string;\r\n    getStepDefaultPosition();\r\n    getStepsOrder(): string[];\r\n    getFirstStep(): string;\r\n    getWaitingTime(): number;\r\n    areLogsEnabled(): boolean;\r\n    isCounterVisible(): boolean;\r\n    isPrevButtonVisible(): boolean;\r\n    getCustomTexts(): ObservableCustomTexts;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideOptionsService implements IJoyrideOptionsService {\r\n    private themeColor: string = DEFAULT_THEME_COLOR;\r\n    private stepDefaultPosition: string = STEP_DEFAULT_POSITION;\r\n    private logsEnabled: boolean = true;\r\n    private showCounter: boolean = true;\r\n    private showPrevButton: boolean = true;\r\n    public stepsOrder: string[] = [];\r\n    private firstStep: string;\r\n    private waitingTime: number;\r\n    private customTexts: ObservableCustomTexts;\r\n    setOptions(options: JoyrideOptions) {\r\n        this.stepsOrder = options.steps;\r\n        this.stepDefaultPosition = options.stepDefaultPosition ? options.stepDefaultPosition : this.stepDefaultPosition;\r\n        this.logsEnabled = typeof options.logsEnabled !== 'undefined' ? options.logsEnabled : this.logsEnabled;\r\n        this.showCounter = typeof options.showCounter !== 'undefined' ? options.showCounter : this.showCounter;\r\n        this.showPrevButton = typeof options.showPrevButton !== 'undefined' ? options.showPrevButton : this.showPrevButton;\r\n        this.themeColor = options.themeColor ? options.themeColor : this.themeColor;\r\n        this.firstStep = options.startWith;\r\n        this.waitingTime = typeof options.waitingTime !== 'undefined' ? options.waitingTime : DEFAULT_TIMEOUT_BETWEEN_STEPS;\r\n        typeof options.customTexts !== 'undefined' ? this.setCustomText(options.customTexts) : this.setCustomText(DEFAULT_TEXTS);\r\n    }\r\n\r\n    getBackdropColor() {\r\n        return this.hexToRgb(this.themeColor);\r\n    }\r\n\r\n    getThemeColor() {\r\n        return this.themeColor;\r\n    }\r\n\r\n    getStepDefaultPosition() {\r\n        return this.stepDefaultPosition;\r\n    }\r\n\r\n    getStepsOrder() {\r\n        return this.stepsOrder;\r\n    }\r\n\r\n    getFirstStep() {\r\n        return this.firstStep;\r\n    }\r\n\r\n    getWaitingTime() {\r\n        return this.waitingTime;\r\n    }\r\n\r\n    areLogsEnabled() {\r\n        return this.logsEnabled;\r\n    }\r\n\r\n    isCounterVisible() {\r\n        return this.showCounter;\r\n    }\r\n\r\n    isPrevButtonVisible() {\r\n        return this.showPrevButton;\r\n    }\r\n\r\n    getCustomTexts(): ObservableCustomTexts {\r\n        return this.customTexts;\r\n    }\r\n\r\n    private setCustomText(texts: CustomTexts) {\r\n        let prev, next, done, close: string | Observable<string>;\r\n        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\r\n        next = texts.next ? texts.next : DEFAULT_TEXTS.next;\r\n        done = texts.done ? texts.done : DEFAULT_TEXTS.done;\r\n        close = texts.close ? texts.close : DEFAULT_TEXTS.close;\r\n        this.customTexts = <ObservableCustomTexts>{\r\n            prev: this.toObservable(prev),\r\n            next: this.toObservable(next),\r\n            done: this.toObservable(done),\r\n            close: this.toObservable(close)\r\n        };\r\n    }\r\n\r\n    private toObservable(value: string | Observable<string>) {\r\n        return value instanceof Observable ? value : of(value);\r\n    }\r\n\r\n    private hexToRgb(hex: any): string {\r\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n        hex = hex.replace(shorthandRegex, (m: any, r: any, g: any, b: any) => {\r\n            return r + r + g + g + b + b;\r\n        });\r\n\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\n\r\nconst JOYRIDE = 'ngx-joyride:::';\r\n\r\n@Injectable()\r\nexport class LoggerService {\r\n\r\n    constructor(private readonly optionService: JoyrideOptionsService) { }\r\n\r\n    debug(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.debug(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    info(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.info(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    warn(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.warn(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    error(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.error(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n}","export class JoyrideError extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideError.prototype);\r\n    }\r\n}\r\n\r\nexport class JoyrideStepDoesNotExist extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\r\n    }\r\n}\r\n\r\nexport class JoyrideStepOutOfRange extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { Subject } from 'rxjs';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { LoggerService } from './logger.service';\r\nimport { JoyrideError, JoyrideStepOutOfRange } from '../models/joyride-error.class';\r\n\r\nconst ROUTE_SEPARATOR = '@';\r\n\r\nclass Step {\r\n    id: string;\r\n    step: JoyrideStep;\r\n}\r\n\r\nexport enum StepActionType {\r\n    NEXT = 'NEXT',\r\n    PREV = 'PREV'\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepsContainerService {\r\n    private steps: Step[];\r\n    private tempSteps: JoyrideStep[] = [];\r\n    private currentStepIndex: number = -2;\r\n    stepHasBeenModified: Subject<JoyrideStep> = new Subject<JoyrideStep>();\r\n\r\n    constructor(private readonly stepOptions: JoyrideOptionsService, private readonly logger: LoggerService) {}\r\n\r\n    private getFirstStepIndex(): number {\r\n        let firstStep = this.stepOptions.getFirstStep();\r\n        let stepIds = this.stepOptions.getStepsOrder();\r\n\r\n        let index = stepIds.indexOf(firstStep);\r\n        if (index < 0) {\r\n            index = 0;\r\n            if (firstStep !== undefined) this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    init() {\r\n        this.logger.info('Initializing the steps array.');\r\n        this.steps = [];\r\n        this.currentStepIndex = this.getFirstStepIndex() - 1;\r\n        let stepIds = this.stepOptions.getStepsOrder();\r\n        stepIds.forEach(stepId => this.steps.push({ id: stepId, step: null }));\r\n    }\r\n\r\n    addStep(stepToAdd: JoyrideStep) {\r\n        let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\r\n        if (!stepExist) {\r\n            this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\r\n            this.tempSteps.push(stepToAdd);\r\n        } else {\r\n            let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\r\n            this.tempSteps[stepIndexToReplace] = stepToAdd;\r\n        }\r\n    }\r\n    get(action: StepActionType): JoyrideStep {\r\n        if (action === StepActionType.NEXT) this.currentStepIndex++;\r\n        else this.currentStepIndex--;\r\n\r\n        if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length)\r\n            throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\r\n\r\n        const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\r\n        const index = this.tempSteps.findIndex(step => step.name === stepName);\r\n        let stepFound = this.tempSteps[index];\r\n        this.steps[this.currentStepIndex].step = stepFound;\r\n\r\n        if (stepFound == null) {\r\n            this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\r\n        }\r\n\r\n        return stepFound;\r\n    }\r\n\r\n    getStepRoute(action: StepActionType) {\r\n        let stepID: string;\r\n        if (action === StepActionType.NEXT) {\r\n            stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\r\n        } else {\r\n            stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\r\n        }\r\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\r\n\r\n        return stepRoute;\r\n    }\r\n\r\n    updatePosition(stepName: string, position: string) {\r\n        let index = this.getStepIndex(stepName);\r\n        if (this.steps[index].step) {\r\n            this.steps[index].step.position = position;\r\n            this.stepHasBeenModified.next(this.steps[index].step);\r\n        } else {\r\n            this.logger.warn(\r\n                `Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`\r\n            );\r\n        }\r\n    }\r\n    getStepNumber(stepName: string): number {\r\n        return this.getStepIndex(stepName) + 1;\r\n    }\r\n\r\n    getStepsCount() {\r\n        let stepsOrder = this.stepOptions.getStepsOrder();\r\n        return stepsOrder.length;\r\n    }\r\n\r\n    private getStepIndex(stepName: string): number {\r\n        const index = this.steps\r\n            .map(step => (step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id))\r\n            .findIndex(name => stepName === name);\r\n        if (index === -1) throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\r\n        return index;\r\n    }\r\n\r\n    private getStepName(stepID: string): string {\r\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\r\n        return stepName;\r\n    }\r\n}\r\n","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class DomRefService {\r\n    private fakeDocument: Document = <Document>{ body: {}, documentElement: {} };\r\n    private fakeWindow: Window = <Window>{ document: this.fakeDocument, navigator: {} };\r\n    constructor(@Inject(PLATFORM_ID) private platformId: Object) {}\r\n    getNativeWindow(): Window {\r\n        if (isPlatformBrowser(this.platformId)) return window;\r\n        else return this.fakeWindow;\r\n    }\r\n\r\n    getNativeDocument() {\r\n        if (isPlatformBrowser(this.platformId)) return document;\r\n        else return this.fakeDocument;\r\n    }\r\n}","import { Injectable, TemplateRef } from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class TemplatesService {\r\n    private _prevButton: TemplateRef<any>;\r\n    private _nextButton: TemplateRef<any>;\r\n    private _doneButton: TemplateRef<any>;\r\n    private _counter: TemplateRef<any>;\r\n    \r\n    setPrevButton(template: TemplateRef<any>) {\r\n        this._prevButton = template;\r\n    }\r\n\r\n    getPrevButton() {\r\n        return this._prevButton;\r\n    }\r\n\r\n    setNextButton(template: TemplateRef<any>) {\r\n        this._nextButton = template;\r\n    }\r\n\r\n    getNextButton() {\r\n        return this._nextButton;\r\n    }\r\n\r\n    setDoneButton(template: TemplateRef<any>) {\r\n        this._doneButton = template;\r\n    }\r\n\r\n    getDoneButton() {\r\n        return this._doneButton;\r\n    }\r\n    setCounter(template: TemplateRef<any>) {\r\n        this._counter = template;\r\n    }\r\n\r\n    getCounter() {\r\n        return this._counter;\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    ElementRef,\r\n    AfterViewInit,\r\n    Input,\r\n    ViewContainerRef,\r\n    TemplateRef,\r\n    Output,\r\n    EventEmitter,\r\n    Inject,\r\n    PLATFORM_ID,\r\n    OnChanges,\r\n    SimpleChanges,\r\n    OnDestroy\r\n} from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { JoyrideStepsContainerService } from '../services/joyride-steps-container.service';\r\nimport { JoyrideError } from '../models/joyride-error.class';\r\nimport { Router } from '@angular/router';\r\nimport { DomRefService } from '../services/dom.service';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { TemplatesService } from '../services/templates.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\nexport const NO_POSITION = 'NO_POSITION';\r\n\r\n@Directive({\r\n    selector: 'joyrideStep, [joyrideStep]'\r\n})\r\nexport class JoyrideDirective implements AfterViewInit, OnChanges, OnDestroy {\r\n    @Input('joyrideStep')\r\n    name: string;\r\n\r\n    @Input()\r\n    nextStep?: string;\r\n\r\n    @Input()\r\n    title?: string | Observable<string>;\r\n\r\n    @Input()\r\n    text?: string | Observable<string>;\r\n\r\n    @Input()\r\n    stepPosition?: string = NO_POSITION;\r\n\r\n    @Input()\r\n    stepContent?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    stepContentParams?: Object;\r\n\r\n    @Input()\r\n    prevTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    nextTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    doneTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    counterTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    startsHidden?: boolean;\r\n\r\n    @Input()\r\n    startsInvisible?: boolean;\r\n\r\n    @Input()\r\n    delayEmitter?: EventEmitter<any>;\r\n\r\n    @Output()\r\n    prev?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    next?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    done?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    private windowRef: Window;\r\n    private step: JoyrideStep;\r\n    private subscriptions: Subscription[] = [];\r\n\r\n    constructor(\r\n        private readonly joyrideStepsContainer: JoyrideStepsContainerService,\r\n        private viewContainerRef: ViewContainerRef,\r\n        private readonly domService: DomRefService,\r\n        private readonly router: Router,\r\n        private readonly templateService: TemplatesService,\r\n        @Inject(PLATFORM_ID) private platformId: Object\r\n    ) {\r\n        this.windowRef = this.domService.getNativeWindow();\r\n        this.step = new JoyrideStep();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!isPlatformBrowser(this.platformId)) return;\r\n        if (this.prevTemplate) this.templateService.setPrevButton(this.prevTemplate);\r\n        if (this.nextTemplate) this.templateService.setNextButton(this.nextTemplate);\r\n        if (this.doneTemplate) this.templateService.setDoneButton(this.doneTemplate);\r\n        if (this.counterTemplate) this.templateService.setCounter(this.counterTemplate);\r\n        this.step.position = this.stepPosition;\r\n        this.step.targetViewContainer = this.viewContainerRef;\r\n        this.setAsyncFields(this.step);\r\n        this.step.stepContent = this.stepContent;\r\n        this.step.stepContentParams = this.stepContentParams;\r\n        this.step.nextClicked = this.next;\r\n        this.step.prevCliked = this.prev;\r\n        this.step.tourDone = this.done;\r\n        if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\r\n        this.step.name = this.name;\r\n        this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\r\n        this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\r\n        this.step.isElementOrAncestorFixed =\r\n            this.isElementFixed(this.viewContainerRef.element) ||\r\n            this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\r\n        this.step.delayEmitter = this.delayEmitter;\r\n        this.step.startsHidden = this.startsHidden;\r\n        this.step.startsInvisible = this.startsHidden ? true : this.startsInvisible;\r\n        this.joyrideStepsContainer.addStep(this.step);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes['title'] || changes['text']) {\r\n            this.setAsyncFields(this.step);\r\n        }\r\n    }\r\n\r\n    private isElementFixed(element: ElementRef) {\r\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\r\n    }\r\n\r\n    private setAsyncFields(step: JoyrideStep) {\r\n        if (this.title instanceof Observable) {\r\n            this.subscriptions.push(\r\n                this.title.subscribe(title => {\r\n                    step.title.next(title);\r\n                })\r\n            );\r\n        } else {\r\n            step.title.next(this.title);\r\n        }\r\n        if (this.text instanceof Observable) {\r\n            this.subscriptions.push(\r\n                this.text.subscribe(text => {\r\n                    step.text.next(text);\r\n                })\r\n            );\r\n        } else {\r\n            step.text.next(this.text);\r\n        }\r\n    }\r\n\r\n    private isAncestorsFixed(nativeElement: any): boolean {\r\n        if (!nativeElement || !nativeElement.parentElement) return false;\r\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\r\n        if (nativeElement.nodeName === 'BODY') {\r\n            return isElementFixed;\r\n        }\r\n        if (isElementFixed) return true;\r\n        else return this.isAncestorsFixed(nativeElement.parentElement);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(sub => {\r\n            sub.unsubscribe();\r\n        });\r\n    }\r\n}\r\n","import { Injectable, ElementRef } from '@angular/core';\r\nimport { DomRefService } from './dom.service';\r\n\r\nexport interface IDocumentService {\r\n    getElementFixedTop(elementRef: ElementRef): number;\r\n\r\n    getElementFixedLeft(elementRef: ElementRef);\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef);\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef);\r\n\r\n    setDocumentHeight();\r\n\r\n    getDocumentHeight(): number;\r\n    isParentScrollable(elementRef: ElementRef): boolean;\r\n    isElementBeyondOthers(elementRef: ElementRef, isElementFixed: boolean, keywordToDiscard: string): number;\r\n    scrollToTheTop(elementRef: ElementRef): void;\r\n    scrollToTheBottom(elementRef: ElementRef): void;\r\n}\r\n\r\n@Injectable()\r\nexport class DocumentService implements IDocumentService {\r\n    private documentHeight: number;\r\n\r\n    constructor(private readonly DOMService: DomRefService) {\r\n        this.setDocumentHeight();\r\n        if (!document.elementsFromPoint) {\r\n            // IE 11 - Edge browsers\r\n            document.elementsFromPoint = this.elementsFromPoint.bind(this);\r\n        }\r\n    }\r\n\r\n    getElementFixedTop(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().top;\r\n    }\r\n\r\n    getElementFixedLeft(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().left;\r\n    }\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().top + scrollOffsets.y;\r\n    }\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef) {\r\n        var scrollOffsets = this.getScrollOffsets();\r\n        return elementRef.nativeElement.getBoundingClientRect().left + scrollOffsets.x;\r\n    }\r\n\r\n    setDocumentHeight() {\r\n        this.documentHeight = this.calculateDocumentHeight();\r\n    }\r\n\r\n    getDocumentHeight() {\r\n        return this.documentHeight;\r\n    }\r\n\r\n    isParentScrollable(elementRef: ElementRef): boolean {\r\n        return this.getFirstScrollableParent(elementRef.nativeElement) !== this.DOMService.getNativeDocument().body;\r\n    }\r\n\r\n    isElementBeyondOthers(elementRef: ElementRef, isElementFixed: boolean, keywordToDiscard: string) {\r\n        const x1 = isElementFixed ? this.getElementFixedLeft(elementRef) : this.getElementAbsoluteLeft(elementRef);\r\n        const y1 = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\r\n        const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\r\n        const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\r\n\r\n        const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\r\n        const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\r\n\r\n        if (elements1.length === 0 && elements2.length === 0) return 1;\r\n        if (\r\n            this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !== elementRef.nativeElement ||\r\n            this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !== elementRef.nativeElement\r\n        ) {\r\n            return 2;\r\n        }\r\n        return 3;\r\n    }\r\n\r\n    scrollIntoView(elementRef: ElementRef, isElementFixed: boolean): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\r\n        const top = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\r\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, top - 150);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = top - 150;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, top - 150);\r\n        }\r\n    }\r\n\r\n    scrollToTheTop(elementRef: ElementRef): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\r\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, 0);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = 0;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        }\r\n    }\r\n\r\n    scrollToTheBottom(elementRef: ElementRef): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\r\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = firstScrollableParent.scrollHeight - firstScrollableParent.clientHeight;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\r\n        }\r\n    }\r\n\r\n    private getFirstScrollableParent(node: any) {\r\n        const regex = /(auto|scroll|overlay)/;\r\n\r\n        const style = (node: any, prop: any) =>\r\n            this.DOMService.getNativeWindow()\r\n                .getComputedStyle(node, null)\r\n                .getPropertyValue(prop);\r\n\r\n        const scroll = (node: any) => regex.test(style(node, 'overflow') + style(node, 'overflow-y') + style(node, 'overflow-x'));\r\n\r\n        const scrollparent = (node: any): any => {\r\n            return !node || node === this.DOMService.getNativeDocument().body\r\n                ? this.DOMService.getNativeDocument().body\r\n                : scroll(node)\r\n                ? node\r\n                : scrollparent(node.parentNode);\r\n        };\r\n\r\n        return scrollparent(node);\r\n    }\r\n\r\n    private calculateDocumentHeight() {\r\n        const documentRef = this.DOMService.getNativeDocument();\r\n        return Math.max(\r\n            documentRef.body.scrollHeight,\r\n            documentRef.documentElement.scrollHeight,\r\n            documentRef.body.offsetHeight,\r\n            documentRef.documentElement.offsetHeight,\r\n            documentRef.body.clientHeight,\r\n            documentRef.documentElement.clientHeight\r\n        );\r\n    }\r\n\r\n    private getScrollOffsets() {\r\n        const winReference = this.DOMService.getNativeWindow();\r\n        const docReference = this.DOMService.getNativeDocument();\r\n\r\n        // This works for all browsers except IE versions 8 and before\r\n        if (winReference.pageXOffset != null) return { x: winReference.pageXOffset, y: winReference.pageYOffset };\r\n\r\n        // For IE (or any browser) in Standards mode\r\n        if (docReference.compatMode == 'CSS1Compat')\r\n            return {\r\n                x: docReference.documentElement.scrollLeft,\r\n                y: docReference.documentElement.scrollTop\r\n            };\r\n\r\n        // For browsers in Quirks mode\r\n        return { x: docReference.body.scrollLeft, y: docReference.body.scrollTop };\r\n    }\r\n\r\n    private elementsFromPoint(x, y) {\r\n        var parents = [];\r\n        var parent = void 0;\r\n        do {\r\n            const elem = this.DOMService.getNativeDocument().elementFromPoint(x, y);\r\n            if (elem && parent !== elem) {\r\n                parent = elem;\r\n                parents.push(parent);\r\n                parent.style.pointerEvents = 'none';\r\n            } else {\r\n                parent = false;\r\n            }\r\n        } while (parent);\r\n        parents.forEach(function(parent) {\r\n            return (parent.style.pointerEvents = 'all');\r\n        });\r\n        return parents;\r\n    }\r\n\r\n    private getFirstElementWithoutKeyword(elements: Element[], keyword: string): Element {\r\n        while (elements[0] && elements[0].classList.toString().includes(keyword)) {\r\n            elements.shift();\r\n        }\r\n        return elements[0];\r\n    }\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2, ViewContainerRef } from '@angular/core';\r\nimport { DocumentService } from './document.service';\r\nimport { Scroll } from './event-listener.service';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\n\r\n@Injectable()\r\nexport class JoyrideBackdropService {\r\n    private renderer: Renderer2;\r\n    private currentBackdropContainer: any;\r\n    private lastBackdropContainer: any;\r\n    private backdropContent: any;\r\n    private backdropTop: any;\r\n    private backdropBottom: any;\r\n    private backdropMiddleContainer: any;\r\n    private backdropMiddleContent: any;\r\n    private leftBackdrop: any;\r\n    private targetBackdrop: any;\r\n    private rightBackdrop: any;\r\n    private elementRef: ViewContainerRef;\r\n    private targetAbsoluteTop: number;\r\n    private targetAbsoluteLeft: number;\r\n    private lastXScroll: number = 0;\r\n    private lastYScroll: number = 0;\r\n\r\n    constructor(\r\n        private readonly documentService: DocumentService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly rendererFactory: RendererFactory2\r\n    ) {\r\n        this.setRenderer();\r\n    }\r\n\r\n    private setRenderer() {\r\n        this.renderer = this.rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    draw(step: JoyrideStep) {\r\n        this.elementRef = step.targetViewContainer;\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n\r\n        this.currentBackdropContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\r\n        this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\r\n\r\n        this.backdropContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropContent, 'backdrop-content');\r\n        this.renderer.setStyle(this.backdropContent, 'position', 'relative');\r\n        this.renderer.setStyle(this.backdropContent, 'height', '100%');\r\n        this.renderer.setStyle(this.backdropContent, 'display', 'flex');\r\n        this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\r\n        this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\r\n\r\n        this.backdropTop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.backdropTop, 'backdrop-top');\r\n        this.renderer.setStyle(this.backdropTop, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\r\n        this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\r\n\r\n        this.backdropMiddleContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\r\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\r\n\r\n        this.backdropMiddleContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\r\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\r\n\r\n        this.leftBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\r\n        this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\r\n        this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\r\n\r\n        this.targetBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\r\n        this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\r\n\r\n        this.rightBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\r\n        this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\r\n        this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\r\n\r\n        this.backdropBottom = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\r\n        this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\r\n        this.renderer.setStyle(this.backdropBottom, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropBottom, 'height', '100%');\r\n        this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\r\n\r\n        this.removeLastBackdrop();\r\n        this.drawCurrentBackdrop();\r\n        this.lastBackdropContainer = this.currentBackdropContainer;\r\n    }\r\n\r\n    remove() {\r\n        this.removeLastBackdrop();\r\n    }\r\n\r\n    redrawTarget(step: JoyrideStep) {\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.handleVerticalScroll(step);\r\n        this.handleHorizontalScroll(step);\r\n    }\r\n\r\n    private getTargetTotalTop(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n        return step.isElementOrAncestorFixed\r\n            ? this.documentService.getElementFixedTop(targetVC.element)\r\n            : this.documentService.getElementAbsoluteTop(targetVC.element);\r\n    }\r\n\r\n    private getTargetTotalLeft(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n\r\n        return step.isElementOrAncestorFixed\r\n            ? this.documentService.getElementFixedLeft(targetVC.element)\r\n            : this.documentService.getElementAbsoluteLeft(targetVC.element);\r\n    }\r\n    redraw(step: JoyrideStep, scroll: Scroll) {\r\n        if (this.lastYScroll !== scroll.scrollY) {\r\n            this.lastYScroll = scroll.scrollY;\r\n            if (this.elementRef) {\r\n                this.handleVerticalScroll(step);\r\n            }\r\n        }\r\n        if (this.lastXScroll !== scroll.scrollX) {\r\n            this.lastXScroll = scroll.scrollX;\r\n            if (this.elementRef) {\r\n                this.handleHorizontalScroll(step);\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleHorizontalScroll(step: JoyrideStep) {\r\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\r\n\r\n        if (newBackdropLeftWidth >= 0) {\r\n            this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        } else {\r\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\r\n        }\r\n    }\r\n\r\n    private handleTargetPartialWidth(newBackdropLeftWidth: number) {\r\n        this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\r\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\r\n        if (visibleTargetWidth >= 0) {\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\r\n        } else {\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\r\n        }\r\n    }\r\n\r\n    private handleVerticalScroll(step: JoyrideStep) {\r\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\r\n\r\n        if (newBackdropTopHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        } else {\r\n            this.handleTargetPartialHeight(newBackdropTopHeight);\r\n        }\r\n    }\r\n\r\n    private handleTargetPartialHeight(newBackdropTopHeight: number) {\r\n        this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\r\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\r\n        if (visibleTargetHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\r\n        } else {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\r\n        }\r\n    }\r\n\r\n    private removeLastBackdrop() {\r\n        if (this.lastBackdropContainer) {\r\n            this.renderer.removeChild(document.body, this.lastBackdropContainer);\r\n            this.lastBackdropContainer = undefined;\r\n        }\r\n    }\r\n\r\n    private drawCurrentBackdrop() {\r\n        this.renderer.appendChild(document.body, this.currentBackdropContainer);\r\n    }\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { DomRefService } from './dom.service';\r\n\r\nexport class Scroll {\r\n    scrollX: number;\r\n    scrollY: number;\r\n}\r\n\r\n@Injectable()\r\nexport class EventListenerService {\r\n    private renderer: Renderer2;\r\n    private scrollUnlisten: any;\r\n    private resizeUnlisten: any;\r\n\r\n    scrollEvent: Subject<Scroll> = new Subject<Scroll>();\r\n    resizeEvent: Subject<number> = new Subject<number>();\r\n\r\n    constructor(private readonly rendererFactory: RendererFactory2, private readonly DOMService: DomRefService) {\r\n        this.renderer = rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    startListeningScrollEvents() {\r\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\r\n            this.scrollEvent.next({\r\n                scrollX: this.DOMService.getNativeWindow().pageXOffset,\r\n                scrollY: this.DOMService.getNativeWindow().pageYOffset\r\n            });\r\n        });\r\n    }\r\n\r\n    startListeningResizeEvents() {\r\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\r\n            this.resizeEvent.next(evt);\r\n        });\r\n    }\r\n\r\n    stopListeningScrollEvents() {\r\n        this.scrollUnlisten();\r\n    }\r\n\r\n    stopListeningResizeEvents() {\r\n        this.resizeUnlisten();\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    Input,\r\n    AfterViewInit,\r\n    ViewEncapsulation,\r\n    OnInit,\r\n    OnDestroy,\r\n    ElementRef,\r\n    ViewChild,\r\n    Renderer2,\r\n    Injector,\r\n    TemplateRef\r\n} from '@angular/core';\r\nimport { JoyrideStep } from '../../models/joyride-step.class';\r\nimport { JoyrideStepService, ARROW_SIZE, DISTANCE_FROM_TARGET, IJoyrideStepService } from '../../services/joyride-step.service';\r\nimport { JoyrideStepsContainerService } from '../../services/joyride-steps-container.service';\r\nimport { EventListenerService } from '../../services/event-listener.service';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport { DocumentService } from '../../services/document.service';\r\nimport { JoyrideOptionsService } from '../../services/joyride-options.service';\r\nimport { LoggerService } from '../../services/logger.service';\r\nimport { TemplatesService } from '../../services/templates.service';\r\n\r\nconst STEP_MIN_WIDTH = 200;\r\nconst STEP_MAX_WIDTH = 400;\r\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\r\nconst STEP_HEIGHT = 200;\r\nconst ASPECT_RATIO = 1.212;\r\nexport const DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\r\nexport const DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\r\n\r\n@Component({\r\n    selector: 'joyride-step',\r\n    templateUrl: './joyride-step.component.html',\r\n    styleUrls: ['./joyride-step.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideStepComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    stepWidth: number = STEP_MIN_WIDTH;\r\n    stepHeight: number = STEP_HEIGHT;\r\n    leftPosition: number;\r\n    topPosition: number;\r\n    showArrow: boolean = true;\r\n    arrowPosition: string;\r\n    arrowLeftPosition: number;\r\n    arrowTopPosition: number;\r\n    title: Observable<string>;\r\n    text: Observable<string>;\r\n    counter: string;\r\n    isCounterVisible: boolean;\r\n    isPrevButtonVisible: boolean;\r\n    themeColor: string;\r\n    customContent: TemplateRef<any>;\r\n    customPrevButton: TemplateRef<any>;\r\n    customNextButton: TemplateRef<any>;\r\n    customDoneButton: TemplateRef<any>;\r\n    customCounter: TemplateRef<any>;\r\n    counterData: any;\r\n    ctx: Object;\r\n\r\n    private arrowSize: number = ARROW_SIZE;\r\n    private stepAbsoluteLeft: number;\r\n    private stepAbsoluteTop: number;\r\n    private targetWidth: number;\r\n    targetHeight: number;\r\n    private targetAbsoluteLeft: number;\r\n    private targetAbsoluteTop: number;\r\n\r\n    private subscriptions: Subscription[] = [];\r\n    joyrideStepService: IJoyrideStepService;\r\n\r\n    private positionAlreadyFixed: boolean;\r\n    private documentHeight: number;\r\n\r\n    prevText: Observable<string>;\r\n    nextText: Observable<string>;\r\n    doneText: Observable<string>;\r\n\r\n    @Input() step?: JoyrideStep;\r\n    @ViewChild('stepHolder', {static: true}) stepHolder: ElementRef;\r\n    @ViewChild('stepContainer', {static: true}) stepContainer: ElementRef;\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private readonly stepsContainerService: JoyrideStepsContainerService,\r\n        private readonly eventListenerService: EventListenerService,\r\n        private readonly documentService: DocumentService,\r\n        private readonly renderer: Renderer2,\r\n        private readonly logger: LoggerService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly templateService: TemplatesService\r\n    ) {}\r\n\r\n    ngOnInit(): void {\r\n        // Need to Inject here otherwise you will obtain a circular dependency\r\n        this.joyrideStepService = this.injector.get(JoyrideStepService);\r\n\r\n        this.documentHeight = this.documentService.getDocumentHeight();\r\n        this.subscriptions.push(this.subscribeToResizeEvents());\r\n        this.title = this.step.title.asObservable();\r\n        this.text = this.step.text.asObservable();\r\n\r\n        this.setCustomTemplates();\r\n        this.setCustomTexts();\r\n\r\n        this.counter = this.getCounter();\r\n        this.isCounterVisible = this.optionsService.isCounterVisible();\r\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\r\n        this.themeColor = this.optionsService.getThemeColor();\r\n\r\n        if (this.text) this.text.subscribe(val => this.checkRedraw(val));\r\n        if (this.title) this.title.subscribe(val => this.checkRedraw(val));\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isCustomized()) {\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\r\n            this.updateStepDimensions();\r\n        } else {\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\r\n            let dimensions = this.getDimensionsByAspectRatio(\r\n                this.stepContainer.nativeElement.clientWidth,\r\n                this.stepContainer.nativeElement.clientHeight,\r\n                ASPECT_RATIO\r\n            );\r\n            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\r\n            this.stepWidth = dimensions.width;\r\n            this.stepHeight = dimensions.height;\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\r\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\r\n        }\r\n        this.drawStep();\r\n    }\r\n\r\n    private checkRedraw(val) {\r\n        if (val != null) {\r\n            // Need to wait that the change is rendered before redrawing\r\n            setTimeout(() => {\r\n                this.redrawStep();\r\n            }, 2);\r\n        }\r\n    }\r\n\r\n    private isCustomized() {\r\n        return (\r\n            this.step.stepContent ||\r\n            this.templateService.getCounter() ||\r\n            this.templateService.getPrevButton() ||\r\n            this.templateService.getNextButton() ||\r\n            this.templateService.getDoneButton()\r\n        );\r\n    }\r\n\r\n    private setCustomTexts() {\r\n        const customeTexts = this.optionsService.getCustomTexts();\r\n        this.prevText = customeTexts.prev;\r\n        this.nextText = customeTexts.next;\r\n        this.doneText = customeTexts.done;\r\n    }\r\n\r\n    private drawStep() {\r\n        let position = this.step.isElementOrAncestorFixed ? 'fixed' : 'absolute';\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\r\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\r\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\r\n        this.targetAbsoluteLeft =\r\n            position === 'fixed'\r\n                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)\r\n                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\r\n        this.targetAbsoluteTop =\r\n            position === 'fixed'\r\n                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)\r\n                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\r\n        this.setStepStyle();\r\n    }\r\n\r\n    private getCounter(): string {\r\n        let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);\r\n        let numberOfSteps = this.stepsContainerService.getStepsCount();\r\n        this.counterData = { step: stepPosition, total: numberOfSteps };\r\n        return stepPosition + '/' + numberOfSteps;\r\n    }\r\n\r\n    private setCustomTemplates() {\r\n        this.customContent = this.step.stepContent;\r\n        this.ctx = this.step.stepContentParams;\r\n        this.customPrevButton = this.templateService.getPrevButton();\r\n        this.customNextButton = this.templateService.getNextButton();\r\n        this.customDoneButton = this.templateService.getDoneButton();\r\n        this.customCounter = this.templateService.getCounter();\r\n    }\r\n\r\n    prev() {\r\n        this.joyrideStepService.prev();\r\n    }\r\n\r\n    next() {\r\n        this.joyrideStepService.next();\r\n    }\r\n\r\n    close() {\r\n        this.joyrideStepService.close();\r\n    }\r\n\r\n    isFirstStep() {\r\n        return this.stepsContainerService.getStepNumber(this.step.name) === 1;\r\n    }\r\n\r\n    isLastStep() {\r\n        return this.stepsContainerService.getStepNumber(this.step.name) === this.stepsContainerService.getStepsCount();\r\n    }\r\n\r\n    private setStepStyle() {\r\n        switch (this.step.position) {\r\n            case 'top': {\r\n                this.setStyleTop();\r\n                break;\r\n            }\r\n            case 'bottom': {\r\n                this.setStyleBottom();\r\n                break;\r\n            }\r\n            case 'right': {\r\n                this.setStyleRight();\r\n                break;\r\n            }\r\n            case 'left': {\r\n                this.setStyleLeft();\r\n                break;\r\n            }\r\n            case 'center': {\r\n                this.setStyleCenter();\r\n                break;\r\n            }\r\n            default: {\r\n                this.setStyleBottom();\r\n            }\r\n        }\r\n    }\r\n\r\n    private setStyleTop() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'top');\r\n        this.topPosition = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.arrowTopPosition = this.stepHeight;\r\n\r\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'bottom';\r\n        this.autofixTopPosition();\r\n    }\r\n\r\n    private setStyleRight() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'right');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = -this.arrowSize;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'left';\r\n        this.autofixRightPosition();\r\n    }\r\n\r\n    private setStyleBottom() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'bottom');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.arrowTopPosition = -this.arrowSize;\r\n\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'top';\r\n        this.autofixBottomPosition();\r\n    }\r\n\r\n    private setStyleLeft() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'left');\r\n        this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = this.stepWidth;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'right';\r\n        this.autofixLeftPosition();\r\n    }\r\n\r\n    private setStyleCenter() {\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\r\n\r\n        this.updateStepDimensions();\r\n\r\n        this.renderer.setStyle(\r\n            this.stepHolder.nativeElement,\r\n            'transform',\r\n            `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`\r\n        );\r\n        this.showArrow = false;\r\n    }\r\n\r\n    private adjustLeftPosition() {\r\n        if (this.leftPosition < 0) {\r\n            this.arrowLeftPosition = this.arrowLeftPosition + this.leftPosition - DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n        }\r\n    }\r\n\r\n    private adjustRightPosition() {\r\n        let currentWindowWidth = document.body.clientWidth;\r\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\r\n            let newLeftPos =\r\n                this.leftPosition - (this.stepAbsoluteLeft + this.stepWidth + DEFAULT_DISTANCE_FROM_MARGIN_RIGHT - currentWindowWidth);\r\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\r\n\r\n            this.leftPosition = newLeftPos;\r\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\r\n        }\r\n    }\r\n\r\n    private adjustTopPosition() {\r\n        if (this.stepAbsoluteTop < 0) {\r\n            this.arrowTopPosition = this.arrowTopPosition + this.topPosition - DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n        }\r\n    }\r\n\r\n    private adjustBottomPosition() {\r\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\r\n            let newTopPos =\r\n                this.topPosition - (this.stepAbsoluteTop + this.stepHeight + DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM - this.documentHeight);\r\n            let deltaTopPosition = newTopPos - this.topPosition;\r\n\r\n            this.topPosition = newTopPos;\r\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\r\n        }\r\n    }\r\n\r\n    private autofixTopPosition() {\r\n        if (this.positionAlreadyFixed) {\r\n            this.logger.warn('No step positions found for this step. The step will be centered.');\r\n        } else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize < 0) {\r\n            this.positionAlreadyFixed = true;\r\n            this.setStyleRight();\r\n        }\r\n    }\r\n\r\n    private autofixRightPosition() {\r\n        if (this.targetAbsoluteLeft + this.targetWidth + this.stepWidth + this.arrowSize > document.body.clientWidth) {\r\n            this.setStyleBottom();\r\n        }\r\n    }\r\n\r\n    private autofixBottomPosition() {\r\n        if (this.targetAbsoluteTop + this.stepHeight + this.arrowSize + this.targetHeight > this.documentHeight) {\r\n            this.setStyleLeft();\r\n        }\r\n    }\r\n\r\n    private autofixLeftPosition() {\r\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\r\n            this.setStyleTop();\r\n        }\r\n    }\r\n\r\n    private subscribeToResizeEvents(): Subscription {\r\n        return this.eventListenerService.resizeEvent.subscribe(() => {\r\n            this.redrawStep();\r\n        });\r\n    }\r\n\r\n    private redrawStep() {\r\n        this.updateStepDimensions();\r\n        this.drawStep();\r\n    }\r\n\r\n    private getDimensionsByAspectRatio(width: number, height: number, aspectRatio: number) {\r\n        let calcHeight = (width + height) / (1 + aspectRatio);\r\n        let calcWidth = calcHeight * aspectRatio;\r\n        return {\r\n            width: calcWidth,\r\n            height: calcHeight\r\n        };\r\n    }\r\n    private adjustDimensions(width: number, height: number) {\r\n        let area = width * height;\r\n        let newWidth = width;\r\n        let newHeight = height;\r\n        if (width > STEP_MAX_WIDTH) {\r\n            newWidth = STEP_MAX_WIDTH;\r\n            newHeight = area / newWidth;\r\n        } else if (width < STEP_MIN_WIDTH) {\r\n            newWidth = STEP_MIN_WIDTH;\r\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\r\n        }\r\n        return {\r\n            width: newWidth,\r\n            height: newHeight\r\n        };\r\n    }\r\n\r\n    private updateStepDimensions() {\r\n        this.stepWidth = this.stepContainer.nativeElement.clientWidth;\r\n        this.stepHeight = this.stepContainer.nativeElement.clientHeight;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscriptions.forEach(subscription => {\r\n            subscription.unsubscribe();\r\n        });\r\n    }\r\n}\r\n","import {\r\n    Injectable,\r\n    ComponentRef,\r\n    ComponentFactoryResolver,\r\n    ApplicationRef,\r\n    Injector,\r\n    EmbeddedViewRef\r\n} from '@angular/core';\r\nimport {JoyrideStepComponent} from \"../components/step/joyride-step.component\";\r\nimport {JoyrideStep} from '../models/joyride-step.class';\r\n\r\n@Injectable()\r\nexport class StepDrawerService {\r\n\r\n    private refMap: { [key: string]: ComponentRef<JoyrideStepComponent>; } = {};\r\n\r\n    constructor(\r\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\r\n        private appRef: ApplicationRef,\r\n        private injector: Injector\r\n    ) {\r\n    }\r\n\r\n    draw(step: JoyrideStep) {\r\n\r\n        // 1. Create a component reference from the component \r\n        const ref: ComponentRef<JoyrideStepComponent> = this.componentFactoryResolver\r\n            .resolveComponentFactory(JoyrideStepComponent)\r\n            .create(this.injector);\r\n\r\n        // 2. Attach component to the appRef so that it's inside the ng component tree\r\n        this.appRef.attachView(ref.hostView);\r\n\r\n        // 3. Get DOM element from component\r\n        const domElem = (ref.hostView as EmbeddedViewRef<any>)\r\n            .rootNodes[0] as HTMLElement;\r\n\r\n        if (step.delayEmitter) {\r\n            step.delayEmitter.subscribe(() => {\r\n                if (step.startsHidden) {\r\n                    domElem.hidden = false;\r\n                    setTimeout(() => {\r\n                        if (step.startsInvisible) {\r\n                            domElem.setAttribute(\"style\", \"visibility: visible\");\r\n                        }\r\n                    }, 500);\r\n                } else {\r\n                    domElem.setAttribute(\"style\", \"visibility: visible\");\r\n                }\r\n            });\r\n        }\r\n        if (step.startsInvisible) {\r\n            domElem.setAttribute(\"style\", \"visibility: hidden\");\r\n        }\r\n        if (step.startsHidden) {\r\n            domElem.hidden = true;\r\n        }\r\n\r\n        // 4. Append DOM element to the body\r\n        document.body.appendChild(domElem);\r\n\r\n        const instance: JoyrideStepComponent = ref.instance;\r\n        instance.step = step;\r\n        ref.changeDetectorRef.detectChanges();\r\n        step.stepInstance = instance;\r\n\r\n        this.refMap[step.name] = ref;\r\n\r\n    }\r\n\r\n    remove(step: JoyrideStep) {\r\n        this.appRef.detachView(this.refMap[step.name].hostView);\r\n        this.refMap[step.name].destroy();\r\n    }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { JoyrideBackdropService } from './joyride-backdrop.service';\r\nimport { EventListenerService } from './event-listener.service';\r\nimport { JoyrideStepsContainerService, StepActionType } from './joyride-steps-container.service';\r\nimport { DocumentService } from './document.service';\r\nimport { StepDrawerService } from './step-drawer.service';\r\nimport { DomRefService } from './dom.service';\r\nimport { NO_POSITION } from '../directives/joyride.directive';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { Router } from '@angular/router';\r\nimport { ReplaySubject, Observable } from 'rxjs';\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { JoyrideStepDoesNotExist, JoyrideStepOutOfRange } from '../models/joyride-error.class';\r\nimport { LoggerService } from './logger.service';\r\n\r\nconst SCROLLBAR_SIZE = 20;\r\n\r\nexport const DISTANCE_FROM_TARGET = 15;\r\nexport const ARROW_SIZE = 10;\r\n\r\nexport interface IJoyrideStepService {\r\n    startTour(): Observable<JoyrideStepInfo>;\r\n    close(): any;\r\n    prev(): any;\r\n    next(): any;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepService implements IJoyrideStepService {\r\n    private currentStep: JoyrideStep;\r\n    private winTopPosition: number = 0;\r\n    private winBottomPosition: number = 0;\r\n    private stepsObserver: ReplaySubject<JoyrideStepInfo> = new ReplaySubject<JoyrideStepInfo>();\r\n\r\n    constructor(\r\n        private readonly backDropService: JoyrideBackdropService,\r\n        private readonly eventListener: EventListenerService,\r\n        private readonly stepsContainerService: JoyrideStepsContainerService,\r\n        private readonly documentService: DocumentService,\r\n        private readonly DOMService: DomRefService,\r\n        private readonly stepDrawerService: StepDrawerService,\r\n        public optionsService: JoyrideOptionsService,\r\n        private readonly router: Router,\r\n        private readonly logger: LoggerService\r\n    ) {\r\n        this.initViewportPositions();\r\n        this.subscribeToScrollEvents();\r\n        this.subscribeToResizeEvents();\r\n    }\r\n\r\n    private initViewportPositions() {\r\n        this.winTopPosition = 0;\r\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n    }\r\n\r\n    private subscribeToScrollEvents() {\r\n        this.eventListener.startListeningScrollEvents();\r\n        this.eventListener.scrollEvent.subscribe(scroll => {\r\n            this.winTopPosition = scroll.scrollY;\r\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n            if (this.currentStep) this.backDropService.redraw(this.currentStep, scroll);\r\n        });\r\n    }\r\n\r\n    private subscribeToResizeEvents() {\r\n        this.eventListener.resizeEvent.subscribe(() => {\r\n            if (this.currentStep) this.backDropService.redrawTarget(this.currentStep);\r\n        });\r\n    }\r\n\r\n    private drawStep(step: JoyrideStep) {\r\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\r\n        this.stepDrawerService.draw(step);\r\n    }\r\n\r\n    startTour(): Observable<JoyrideStepInfo> {\r\n        this.stepsObserver = new ReplaySubject<JoyrideStepInfo>();\r\n        this.stepsContainerService.init();\r\n        this.documentService.setDocumentHeight();\r\n\r\n        this.tryShowStep(StepActionType.NEXT);\r\n        this.eventListener.startListeningResizeEvents();\r\n        this.subscribeToStepsUpdates();\r\n        return this.stepsObserver.asObservable();\r\n    }\r\n\r\n    close() {\r\n        this.removeCurrentStep();\r\n        this.notifyTourIsFinished();\r\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        this.eventListener.stopListeningResizeEvents();\r\n        this.backDropService.remove();\r\n    }\r\n\r\n    prev() {\r\n        this.removeCurrentStep();\r\n        this.currentStep.prevCliked.emit();\r\n        this.tryShowStep(StepActionType.PREV);\r\n    }\r\n\r\n    next() {\r\n        this.removeCurrentStep();\r\n        this.currentStep.nextClicked.emit();\r\n        this.tryShowStep(StepActionType.NEXT);\r\n    }\r\n\r\n    private navigateToStepPage(action: StepActionType) {\r\n        let stepRoute = this.stepsContainerService.getStepRoute(action);\r\n        if (stepRoute) {\r\n            this.router.navigate([stepRoute]);\r\n        }\r\n    }\r\n\r\n    private subscribeToStepsUpdates() {\r\n        this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\r\n            if (this.currentStep && this.currentStep.name === updatedStep.name) {\r\n                this.currentStep = updatedStep;\r\n            }\r\n        });\r\n    }\r\n\r\n    private tryShowStep(actionType: StepActionType) {\r\n        this.navigateToStepPage(actionType);\r\n        const timeout = this.optionsService.getWaitingTime();\r\n        if (timeout > 100) this.backDropService.remove();\r\n        setTimeout(() => {\r\n            try {\r\n                this.showStep(actionType);\r\n            } catch (error) {\r\n                if (error instanceof JoyrideStepDoesNotExist) {\r\n                    this.tryShowStep(actionType);\r\n                } else if (error instanceof JoyrideStepOutOfRange) {\r\n                    this.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\r\n                    this.close();\r\n                } else {\r\n                    throw new Error(error);\r\n                }\r\n            }\r\n        }, timeout);\r\n    }\r\n\r\n    private showStep(actionType: StepActionType) {\r\n        this.currentStep = this.stepsContainerService.get(actionType);\r\n\r\n        if (this.currentStep == null) throw new JoyrideStepDoesNotExist('');\r\n        // Scroll the element to get it visible if it's in a scrollable element\r\n        this.scrollIfElementBeyondOtherElements();\r\n        this.backDropService.draw(this.currentStep);\r\n        this.drawStep(this.currentStep);\r\n        this.scrollIfStepAndTargetAreNotVisible();\r\n        this.notifyStepClicked(actionType);\r\n    }\r\n\r\n    private notifyStepClicked(actionType: StepActionType) {\r\n        let stepInfo: JoyrideStepInfo = {\r\n            number: this.stepsContainerService.getStepNumber(this.currentStep.name),\r\n            name: this.currentStep.name,\r\n            route: this.currentStep.route,\r\n            actionType\r\n        };\r\n        this.stepsObserver.next(stepInfo);\r\n    }\r\n\r\n    private notifyTourIsFinished() {\r\n        if (this.currentStep) this.currentStep.tourDone.emit();\r\n        this.stepsObserver.complete();\r\n    }\r\n    private removeCurrentStep() {\r\n        if (this.currentStep) this.stepDrawerService.remove(this.currentStep);\r\n    }\r\n\r\n    private scrollIfStepAndTargetAreNotVisible() {\r\n        this.scrollWhenTargetOrStepAreHiddenBottom();\r\n        this.scrollWhenTargetOrStepAreHiddenTop();\r\n    }\r\n\r\n    private scrollWhenTargetOrStepAreHiddenBottom() {\r\n        let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\r\n        if (totalTargetBottom > this.winBottomPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\r\n        }\r\n    }\r\n\r\n    private scrollWhenTargetOrStepAreHiddenTop() {\r\n        let totalTargetTop = this.getMaxTargetAndStepTopPosition();\r\n        if (totalTargetTop < this.winTopPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\r\n        }\r\n    }\r\n\r\n    private getMaxTargetAndStepBottomPosition(): number {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return (\r\n                targetAbsoluteTop +\r\n                this.currentStep.stepInstance.targetHeight +\r\n                this.currentStep.stepInstance.stepHeight +\r\n                ARROW_SIZE +\r\n                DISTANCE_FROM_TARGET\r\n            );\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.max(\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2\r\n            );\r\n        }\r\n    }\r\n\r\n    private getMaxTargetAndStepTopPosition() {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return targetAbsoluteTop;\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.min(\r\n                targetAbsoluteTop,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2\r\n            );\r\n        }\r\n    }\r\n\r\n    private scrollIfElementBeyondOtherElements() {\r\n        if (this.isElementBeyondOthers() === 2) {\r\n            this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\r\n        }\r\n        if (this.isElementBeyondOthers() === 2) {\r\n            this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\r\n        }\r\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\r\n            this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\r\n        }\r\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\r\n            this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\r\n        }\r\n    }\r\n\r\n    private isElementBeyondOthers() {\r\n        return this.documentService.isElementBeyondOthers(\r\n            this.currentStep.targetViewContainer.element,\r\n            this.currentStep.isElementOrAncestorFixed,\r\n            'backdrop'\r\n        );\r\n    }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction UnsubscriptionErrorImpl(errors) {\n    Error.call(this);\n    this.message = errors ?\n        errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n}\nUnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                if (!teardown) {\n                    return Subscription.EMPTY;\n                }\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = typeof Symbol === 'function'\n    ? /*@__PURE__*/ Symbol('rxSubscriber')\n    : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === \"N\";\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case \"N\":\n                return observer.next && observer.next(this.value);\n            case \"E\":\n                return observer.error && observer.error(this.error);\n            case \"C\":\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case \"N\":\n                return next && next(this.value);\n            case \"E\":\n                return error && error(this.error);\n            case \"C\":\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case \"N\":\n                return of(this.value);\n            case \"E\":\n                return throwError(this.error);\n            case \"C\":\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification(\"N\", value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification(\"E\", undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification(\"C\");\n    Notification.undefinedValueNotification = new Notification(\"N\", undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction EmptyErrorImpl() {\n    Error.call(this);\n    this.message = 'no elements in sequence';\n    this.name = 'EmptyError';\n    return this;\n}\nEmptyErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\nexport var EmptyError = EmptyErrorImpl;\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nexport function finalize(callback) {\n    return function (source) { return source.lift(new FinallyOperator(callback)); };\n}\nvar FinallyOperator = /*@__PURE__*/ (function () {\n    function FinallyOperator(callback) {\n        this.callback = callback;\n    }\n    FinallyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n    };\n    return FinallyOperator;\n}());\nvar FinallySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n//# sourceMappingURL=finalize.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction ObjectUnsubscribedErrorImpl() {\n    Error.call(this);\n    this.message = 'object unsubscribed';\n    this.name = 'ObjectUnsubscribedError';\n    return this;\n}\nObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Subscription,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowToggle(openings, closingSelector) {\n    return function (source) { return source.lift(new WindowToggleOperator(openings, closingSelector)); };\n}\nvar WindowToggleOperator = /*@__PURE__*/ (function () {\n    function WindowToggleOperator(openings, closingSelector) {\n        this.openings = openings;\n        this.closingSelector = closingSelector;\n    }\n    WindowToggleOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n    };\n    return WindowToggleOperator;\n}());\nvar WindowToggleSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_1 = contexts[index];\n                context_1.window.error(err);\n                context_1.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_2 = contexts[index];\n                context_2.window.complete();\n                context_2.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context_3 = contexts[index];\n                context_3.window.unsubscribe();\n                context_3.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingNotifier = void 0;\n            try {\n                var closingSelector = this.closingSelector;\n                closingNotifier = closingSelector(innerValue);\n            }\n            catch (e) {\n                return this.error(e);\n            }\n            var window_1 = new Subject();\n            var subscription = new Subscription();\n            var context_4 = { window: window_1, subscription: subscription };\n            this.contexts.push(context_4);\n            var innerSubscription = subscribeToResult(this, closingNotifier, context_4);\n            if (innerSubscription.closed) {\n                this.closeWindow(this.contexts.length - 1);\n            }\n            else {\n                innerSubscription.context = context_4;\n                subscription.add(innerSubscription);\n            }\n            this.destination.next(window_1);\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=windowToggle.js.map\n","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { JoyrideStepService } from './joyride-step.service';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideOptions } from '../models/joyride-options.class';\r\nimport { Observable, of } from 'rxjs';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class JoyrideService {\r\n    private tourInProgress: boolean = false;\r\n    private tour$: Observable<JoyrideStepInfo>;\r\n\r\n    constructor(\r\n        @Inject(PLATFORM_ID) private platformId: Object,\r\n        public stepService: JoyrideStepService,\r\n        public optionsService: JoyrideOptionsService\r\n    ) {}\r\n\r\n    startTour(options?: JoyrideOptions): Observable<JoyrideStepInfo> {\r\n        if (!isPlatformBrowser(this.platformId)) {\r\n            return of(new JoyrideStepInfo());\r\n        }\r\n        if (!this.tourInProgress) {\r\n            this.tourInProgress = true;\r\n            if (options) {\r\n                this.optionsService.setOptions(options);\r\n            }\r\n            this.tour$ = this.stepService.startTour().pipe(finalize(() => (this.tourInProgress = false)));\r\n            this.tour$.subscribe();\r\n        }\r\n        return this.tour$;\r\n    }\r\n\r\n    closeTour(): void {\r\n        if (this.isTourInProgress()) this.stepService.close();\r\n    }\r\n\r\n    isTourInProgress(): boolean {\r\n        return this.tourInProgress;\r\n    }\r\n}\r\n","import { Component, Input, EventEmitter, Output } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-button',\r\n    templateUrl: './button.component.html',\r\n    styleUrls: ['./button.component.scss']\r\n})\r\nexport class JoyrideButtonComponent {\r\n    hover: boolean;\r\n    \r\n    @Input() \r\n    color: string;\r\n    \r\n    @Output()\r\n    clicked: EventEmitter<any> = new EventEmitter();\r\n\r\n    onClick() {\r\n        this.clicked.emit();\r\n    }\r\n}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'joy-close-button',\r\n    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <line x1=\"1\" y1=\"24\" \r\n                    x2=\"24\" y2=\"1\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n                <line x1=\"1\" y1=\"1\" \r\n                    x2=\"24\" y2=\"24\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n            </svg>`\r\n})\r\n\r\nexport class JoyrideCloseButtonComponent { }","\r\nimport { Component, Input, ViewEncapsulation } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-arrow',\r\n    templateUrl: './arrow.component.html',\r\n    styleUrls: ['./arrow.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideArrowComponent {\r\n    @Input()\r\n    position: string = 'top';\r\n}","import { NgModule, ModuleWithProviders } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { JoyrideDirective } from './directives/joyride.directive';\r\nimport { JoyrideService } from './services/joyride.service';\r\nimport { JoyrideStepComponent } from \"./components/step/joyride-step.component\";\r\nimport { JoyrideButtonComponent } from \"./components/button/button.component\";\r\nimport { JoyrideCloseButtonComponent } from \"./components/close-button/close-button.component\";\r\nimport { JoyrideStepService } from \"./services/joyride-step.service\";\r\nimport { JoyrideBackdropService } from \"./services/joyride-backdrop.service\";\r\nimport { JoyrideArrowComponent } from \"./components/arrow/arrow.component\";\r\nimport { EventListenerService } from \"./services/event-listener.service\";\r\nimport { JoyrideStepsContainerService } from \"./services/joyride-steps-container.service\";\r\nimport { DocumentService } from \"./services/document.service\";\r\nimport { JoyrideOptionsService } from './services/joyride-options.service';\r\nimport { StepDrawerService } from './services/step-drawer.service';\r\nimport { DomRefService } from './services/dom.service';\r\nimport { LoggerService } from './services/logger.service';\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { TemplatesService } from \"./services/templates.service\";\r\n\r\nexport const routerModuleForChild: ModuleWithProviders = RouterModule.forChild([]);\r\n\r\n@NgModule({\r\n    imports: [CommonModule, routerModuleForChild],\r\n    declarations: [\r\n        JoyrideDirective,\r\n        JoyrideStepComponent,\r\n        JoyrideArrowComponent,\r\n        JoyrideButtonComponent,\r\n        JoyrideCloseButtonComponent\r\n    ],\r\n    entryComponents: [JoyrideStepComponent],\r\n    exports: [\r\n        JoyrideDirective\r\n    ]\r\n})\r\nexport class JoyrideModule {\r\n    static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: [\r\n                JoyrideService,\r\n                JoyrideStepService,\r\n                JoyrideStepsContainerService,\r\n                JoyrideBackdropService,\r\n                EventListenerService,\r\n                DocumentService,\r\n                JoyrideOptionsService,\r\n                StepDrawerService,\r\n                DomRefService,\r\n                LoggerService,\r\n                TemplatesService\r\n            ]\r\n        }\r\n    }\r\n    static forChild(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: []\r\n        }\r\n    }\r\n}\r\n"],"names":["JoyrideStep","[object Object]","this","title","ReplaySubject","text","DEFAULT_TEXTS","prev","of","next","done","close","exports","options","stepsOrder","steps","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","themeColor","firstStep","startWith","waitingTime","customTexts","setCustomText","hexToRgb","texts","toObservable","value","Observable","hex","replace","m","r","g","b","result","exec","parseInt","JoyrideOptionsService","Injectable","JOYRIDE","optionService","message","data","areLogsEnabled","console","debug","info","warn","error","LoggerService","JoyrideError","Error","super","Object","setPrototypeOf","prototype","JoyrideStepDoesNotExist","JoyrideStepOutOfRange","StepActionType","stepOptions","logger","Subject","getFirstStep","index","getStepsOrder","indexOf","undefined","currentStepIndex","getFirstStepIndex","forEach","stepId","push","id","step","stepToAdd","tempSteps","filter","name","length","stepIndexToReplace","findIndex","action","NEXT","stepName","getStepName","stepFound","stepID","includes","split","position","getStepIndex","stepHasBeenModified","map","JoyrideStepsContainerService","platformId","body","documentElement","document","fakeDocument","navigator","isPlatformBrowser","window","fakeWindow","DomRefService","__param","Inject","PLATFORM_ID","TemplatesService","template","_prevButton","_nextButton","_doneButton","_counter","joyrideStepsContainer","viewContainerRef","domService","router","templateService","EventEmitter","windowRef","getNativeWindow","prevTemplate","setPrevButton","nextTemplate","setNextButton","doneTemplate","setDoneButton","counterTemplate","setCounter","stepPosition","targetViewContainer","setAsyncFields","stepContent","stepContentParams","nextClicked","prevCliked","tourDone","route","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","delayEmitter","startsHidden","startsInvisible","addStep","changes","subscriptions","subscribe","nodeName","sub","unsubscribe","__decorate","Input","TemplateRef","Output","JoyrideDirective","Directive","selector","ViewContainerRef","Router","DOMService","setDocumentHeight","elementsFromPoint","bind","elementRef","getBoundingClientRect","top","left","scrollOffsets","getScrollOffsets","y","x","documentHeight","calculateDocumentHeight","getFirstScrollableParent","getNativeDocument","keywordToDiscard","x1","getElementFixedLeft","getElementAbsoluteLeft","y1","getElementFixedTop","getElementAbsoluteTop","x2","width","y2","height","elements1","elements2","getFirstElementWithoutKeyword","firstScrollableParent","scrollTo","scrollTop","scrollHeight","clientHeight","node","regex","style","prop","getPropertyValue","scrollparent","test","scroll","parentNode","documentRef","Math","max","offsetHeight","winReference","docReference","pageXOffset","pageYOffset","compatMode","scrollLeft","parents","parent","elem","elementFromPoint","pointerEvents","elements","keyword","classList","toString","shift","DocumentService","documentService","optionsService","rendererFactory","setRenderer","renderer","createRenderer","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","currentBackdropContainer","createElement","addClass","setStyle","setAttribute","backdropContent","appendChild","backdropTop","lastYScroll","getBackdropColor","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","lastXScroll","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeLastBackdrop","drawCurrentBackdrop","lastBackdropContainer","handleVerticalScroll","handleHorizontalScroll","targetVC","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","JoyrideBackdropService","RendererFactory2","scrollUnlisten","listen","evt","scrollEvent","resizeUnlisten","resizeEvent","EventListenerService","injector","stepsContainerService","eventListenerService","ARROW_SIZE","joyrideStepService","get","JoyrideStepService","getDocumentHeight","subscribeToResizeEvents","asObservable","setCustomTemplates","setCustomTexts","counter","getCounter","isCounterVisible","isPrevButtonVisible","getThemeColor","val","checkRedraw","isCustomized","stepContainer","CUSTOM_STEP_MAX_WIDTH_VW","updateStepDimensions","STEP_MAX_WIDTH","dimensions","getDimensionsByAspectRatio","clientWidth","adjustDimensions","stepWidth","stepHeight","drawStep","setTimeout","redrawStep","getPrevButton","getNextButton","getDoneButton","customeTexts","getCustomTexts","prevText","nextText","doneText","stepHolder","targetWidth","targetHeight","setStepStyle","getStepNumber","numberOfSteps","getStepsCount","counterData","total","customContent","ctx","customPrevButton","customNextButton","customDoneButton","customCounter","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","updatePosition","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","arrowTopPosition","leftPosition","stepAbsoluteLeft","arrowLeftPosition","arrowSize","adjustLeftPosition","adjustRightPosition","arrowPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","showArrow","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","aspectRatio","calcHeight","newWidth","newHeight","subscription","ViewChild","static","ElementRef","JoyrideStepComponent","Injector","Renderer2","componentFactoryResolver","appRef","ref","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","hidden","instance","changeDetectorRef","detectChanges","stepInstance","refMap","detachView","destroy","StepDrawerService","ComponentFactoryResolver","ApplicationRef","backDropService","eventListener","stepDrawerService","initViewportPositions","subscribeToScrollEvents","winTopPosition","winBottomPosition","innerHeight","startListeningScrollEvents","currentStep","redraw","redrawTarget","getStepDefaultPosition","draw","stepsObserver","init","tryShowStep","startListeningResizeEvents","subscribeToStepsUpdates","removeCurrentStep","notifyTourIsFinished","stopListeningResizeEvents","remove","emit","PREV","stepRoute","getStepRoute","navigate","updatedStep","actionType","navigateToStepPage","timeout","getWaitingTime","showStep","scrollIfElementBeyondOtherElements","scrollIfStepAndTargetAreNotVisible","notifyStepClicked","stepInfo","number","complete","scrollWhenTargetOrStepAreHiddenBottom","scrollWhenTargetOrStepAreHiddenTop","totalTargetBottom","getMaxTargetAndStepBottomPosition","scrollBy","totalTargetTop","getMaxTargetAndStepTopPosition","min","isElementBeyondOthers","scrollToTheTop","scrollToTheBottom","isParentScrollable","scrollIntoView","extendStatics","d","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","config","Promise","useDeprecatedSynchronousErrorHandling","stack","hostReportError","err","empty","closed","isArray","isObject","UnsubscriptionErrorImpl","errors","call","i","join","UnsubscriptionError","Subscription","_parentOrParents","_subscriptions","_unsubscribe","e","flattenUnsubscriptionErrors","len","concat","add","teardown","tmp","EMPTY","subscriptionIndex","splice","reduce","errs","rxSubscriber","Symbol","random","Subscriber","_super","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","destination","emptyObserver","SafeSubscriber","tslib_1.__extends","rxSubscriberSymbol","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","context","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","fn","observable","NotificationKind","EmptyErrorImpl","FinallyOperator","callback","source","FinallySubscriber","ObjectUnsubscribedErrorImpl","stepService","tourInProgress","setOptions","tour$","startTour","pipe","lift","isTourInProgress","JoyrideService","clicked","JoyrideButtonComponent","JoyrideCloseButtonComponent","Component","JoyrideArrowComponent","routerModuleForChild","RouterModule","forChild","ngModule","JoyrideModule_1","providers","JoyrideModule","NgModule","imports","CommonModule","declarations","entryComponents"],"mappings":"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"}