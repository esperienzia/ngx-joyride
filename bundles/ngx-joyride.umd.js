!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/core"),require("@angular/common"),require("@angular/router")):"function"==typeof define&&define.amd?define(["exports","rxjs","@angular/core","@angular/common","@angular/router"],e):e(t["ngx-joyride"]={},t.rxjs,t.core,t.common,t.router)}(this,function(t,e,i,r,o){"use strict";function s(t,e,i,r){var o,s=arguments.length,n=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(n=(s<3?o(n):s>3?o(e,i,n):o(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n}function n(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e){return function(i,r){e(i,r,t)}}class h{constructor(){this.startsHidden=!1,this.startsInvisible=!1,this.title=new e.ReplaySubject,this.text=new e.ReplaySubject}}const p={prev:e.of("prev"),next:e.of("next"),done:e.of("done"),close:e.of(null)};var a;t.JoyrideOptionsService=class{constructor(){this.themeColor="#3b5560",this.stepDefaultPosition="bottom",this.logsEnabled=!0,this.showCounter=!0,this.showPrevButton=!0,this.stepsOrder=[]}setOptions(t){this.stepsOrder=t.steps,this.stepDefaultPosition=t.stepDefaultPosition?t.stepDefaultPosition:this.stepDefaultPosition,this.logsEnabled=void 0!==t.logsEnabled?t.logsEnabled:this.logsEnabled,this.showCounter=void 0!==t.showCounter?t.showCounter:this.showCounter,this.showPrevButton=void 0!==t.showPrevButton?t.showPrevButton:this.showPrevButton,this.themeColor=t.themeColor?t.themeColor:this.themeColor,this.firstStep=t.startWith,this.waitingTime=void 0!==t.waitingTime?t.waitingTime:1,void 0!==t.customTexts?this.setCustomText(t.customTexts):this.setCustomText(p)}getBackdropColor(){return this.hexToRgb(this.themeColor)}getThemeColor(){return this.themeColor}getStepDefaultPosition(){return this.stepDefaultPosition}getStepsOrder(){return this.stepsOrder}getFirstStep(){return this.firstStep}getWaitingTime(){return this.waitingTime}areLogsEnabled(){return this.logsEnabled}isCounterVisible(){return this.showCounter}isPrevButtonVisible(){return this.showPrevButton}getCustomTexts(){return this.customTexts}setCustomText(t){let e,i,r,o;e=t.prev?t.prev:p.prev,i=t.next?t.next:p.next,r=t.done?t.done:p.done,o=t.close?t.close:p.close,this.customTexts={prev:this.toObservable(e),next:this.toObservable(i),done:this.toObservable(r),close:this.toObservable(o)}}toObservable(t){return t instanceof e.Observable?t:e.of(t)}hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,e,i,r)=>e+e+i+i+r+r);var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:null}},t.JoyrideOptionsService=s([i.Injectable()],t.JoyrideOptionsService);const l="ngx-joyride:::";t.LoggerService=class{constructor(t){this.optionService=t}debug(t,e=""){this.optionService.areLogsEnabled()&&console.debug(l+t,e)}info(t,e=""){this.optionService.areLogsEnabled()&&console.info(l+t,e)}warn(t,e=""){this.optionService.areLogsEnabled()&&console.warn(l+t,e)}error(t,e=""){this.optionService.areLogsEnabled()&&console.error(l+t,e)}},t.LoggerService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(a=void 0!==t.JoyrideOptionsService&&t.JoyrideOptionsService)?a:Object])],t.LoggerService);class d extends Error{constructor(t){super(t),Object.setPrototypeOf(this,d.prototype)}}class u extends Error{constructor(t){super(t),Object.setPrototypeOf(this,u.prototype)}}class v extends Error{constructor(t){super(t),Object.setPrototypeOf(this,v.prototype)}}var f,m;var g,S,b,y,w,C,x,T,E,O,j,_,P,k,B,D,A,R;(g=t.StepActionType||(t.StepActionType={})).NEXT="NEXT",g.PREV="PREV",t.JoyrideStepsContainerService=class{constructor(t,i){this.stepOptions=t,this.logger=i,this.tempSteps=[],this.currentStepIndex=-2,this.stepHasBeenModified=new e.Subject}getFirstStepIndex(){let t=this.stepOptions.getFirstStep(),e=this.stepOptions.getStepsOrder().indexOf(t);return e<0&&(e=0,void 0!==t&&this.logger.warn(`The step ${t} does not exist. Check in your step list if it's present.`)),e}init(){this.logger.info("Initializing the steps array."),this.steps=[],this.currentStepIndex=this.getFirstStepIndex()-1,this.stepOptions.getStepsOrder().forEach(t=>this.steps.push({id:t,step:null}))}addStep(t){if(this.tempSteps.filter(e=>e.name===t.name).length>0){let e=this.tempSteps.findIndex(e=>e.name===t.name);this.tempSteps[e]=t}else this.tempSteps.push(t)}get(e){if(e===t.StepActionType.NEXT?this.currentStepIndex++:this.currentStepIndex--,this.currentStepIndex<0||this.currentStepIndex>=this.steps.length)throw new v("The first or last step of the tour cannot be found!");const i=this.getStepName(this.steps[this.currentStepIndex].id),r=this.tempSteps.findIndex(t=>t.name===i);let o=this.tempSteps[r];return this.steps[this.currentStepIndex].step=o,null==o&&this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`),o}getStepRoute(e){let i;return(i=e===t.StepActionType.NEXT?this.steps[this.currentStepIndex+1]?this.steps[this.currentStepIndex+1].id:null:this.steps[this.currentStepIndex-1]?this.steps[this.currentStepIndex-1].id:null)&&i.includes("@")?i.split("@")[1]:""}updatePosition(t,e){let i=this.getStepIndex(t);this.steps[i].step?(this.steps[i].step.position=e,this.stepHasBeenModified.next(this.steps[i].step)):this.logger.warn(`Trying to modify the position of ${t} to ${e}. Step not found!Is this step located in a different route?`)}getStepNumber(t){return this.getStepIndex(t)+1}getStepsCount(){return this.stepOptions.getStepsOrder().length}getStepIndex(t){const e=this.steps.map(t=>t.id.includes("@")?t.id.split("@")[0]:t.id).findIndex(e=>t===e);if(-1===e)throw new d(`The step with name: ${t} does not exist in the step list.`);return e}getStepName(t){return t&&t.includes("@")?t.split("@")[0]:t}},t.JoyrideStepsContainerService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(f=void 0!==t.JoyrideOptionsService&&t.JoyrideOptionsService)?f:Object,"function"==typeof(m=void 0!==t.LoggerService&&t.LoggerService)?m:Object])],t.JoyrideStepsContainerService),t.DomRefService=class{constructor(t){this.platformId=t,this.fakeDocument={body:{},documentElement:{}},this.fakeWindow={document:this.fakeDocument,navigator:{}}}getNativeWindow(){return r.isPlatformBrowser(this.platformId)?window:this.fakeWindow}getNativeDocument(){return r.isPlatformBrowser(this.platformId)?document:this.fakeDocument}},t.DomRefService=s([i.Injectable(),c(0,i.Inject(i.PLATFORM_ID)),n("design:paramtypes",["function"==typeof(S="undefined"!=typeof Object&&Object)?S:Object])],t.DomRefService),t.TemplatesService=class{setPrevButton(t){this._prevButton=t}getPrevButton(){return this._prevButton}setNextButton(t){this._nextButton=t}getNextButton(){return this._nextButton}setDoneButton(t){this._doneButton=t}getDoneButton(){return this._doneButton}setCounter(t){this._counter=t}getCounter(){return this._counter}},t.TemplatesService=s([i.Injectable()],t.TemplatesService);var I,L,H,J,M,F,N,W,V,z,U,$,X,Y,q,G,K;t.JoyrideDirective=class{constructor(t,e,r,o,s,n){this.joyrideStepsContainer=t,this.viewContainerRef=e,this.domService=r,this.router=o,this.templateService=s,this.platformId=n,this.stepPosition="NO_POSITION",this.prev=new i.EventEmitter,this.next=new i.EventEmitter,this.done=new i.EventEmitter,this.subscriptions=[],this.windowRef=this.domService.getNativeWindow(),this.step=new h}ngAfterViewInit(){if(r.isPlatformBrowser(this.platformId)){if(this.prevTemplate&&this.templateService.setPrevButton(this.prevTemplate),this.nextTemplate&&this.templateService.setNextButton(this.nextTemplate),this.doneTemplate&&this.templateService.setDoneButton(this.doneTemplate),this.counterTemplate&&this.templateService.setCounter(this.counterTemplate),this.step.position=this.stepPosition,this.step.targetViewContainer=this.viewContainerRef,this.setAsyncFields(this.step),this.step.stepContent=this.stepContent,this.step.stepContentParams=this.stepContentParams,this.step.nextClicked=this.next,this.step.prevCliked=this.prev,this.step.tourDone=this.done,!this.name)throw new d("All the steps should have the 'joyrideStep' property set with a custom name.");this.step.name=this.name,this.step.route="/"===this.router.url.substr(0,1)?this.router.url.substr(1):this.router.url,this.step.transformCssStyle=this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform,this.step.isElementOrAncestorFixed=this.isElementFixed(this.viewContainerRef.element)||this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement),this.step.delayEmitter=this.delayEmitter,this.step.startsHidden=this.startsHidden,this.step.startsInvisible=!!this.startsHidden||this.startsInvisible,this.joyrideStepsContainer.addStep(this.step)}}ngOnChanges(t){(t.title||t.text)&&this.setAsyncFields(this.step)}isElementFixed(t){return"fixed"===this.windowRef.getComputedStyle(t.nativeElement).position}setAsyncFields(t){this.title instanceof e.Observable?this.subscriptions.push(this.title.subscribe(e=>{t.title.next(e)})):t.title.next(this.title),this.text instanceof e.Observable?this.subscriptions.push(this.text.subscribe(e=>{t.text.next(e)})):t.text.next(this.text)}isAncestorsFixed(t){if(!t||!t.parentElement)return!1;let e="fixed"===this.windowRef.getComputedStyle(t.parentElement).position;return"BODY"===t.nodeName?e:!!e||this.isAncestorsFixed(t.parentElement)}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}},s([i.Input("joyrideStep"),n("design:type",String)],t.JoyrideDirective.prototype,"name",void 0),s([i.Input(),n("design:type",String)],t.JoyrideDirective.prototype,"nextStep",void 0),s([i.Input(),n("design:type",Object)],t.JoyrideDirective.prototype,"title",void 0),s([i.Input(),n("design:type",Object)],t.JoyrideDirective.prototype,"text",void 0),s([i.Input(),n("design:type",String)],t.JoyrideDirective.prototype,"stepPosition",void 0),s([i.Input(),n("design:type","function"==typeof(b=void 0!==i.TemplateRef&&i.TemplateRef)?b:Object)],t.JoyrideDirective.prototype,"stepContent",void 0),s([i.Input(),n("design:type","function"==typeof(y="undefined"!=typeof Object&&Object)?y:Object)],t.JoyrideDirective.prototype,"stepContentParams",void 0),s([i.Input(),n("design:type","function"==typeof(w=void 0!==i.TemplateRef&&i.TemplateRef)?w:Object)],t.JoyrideDirective.prototype,"prevTemplate",void 0),s([i.Input(),n("design:type","function"==typeof(C=void 0!==i.TemplateRef&&i.TemplateRef)?C:Object)],t.JoyrideDirective.prototype,"nextTemplate",void 0),s([i.Input(),n("design:type","function"==typeof(x=void 0!==i.TemplateRef&&i.TemplateRef)?x:Object)],t.JoyrideDirective.prototype,"doneTemplate",void 0),s([i.Input(),n("design:type","function"==typeof(T=void 0!==i.TemplateRef&&i.TemplateRef)?T:Object)],t.JoyrideDirective.prototype,"counterTemplate",void 0),s([i.Input(),n("design:type",Boolean)],t.JoyrideDirective.prototype,"startsHidden",void 0),s([i.Input(),n("design:type",Boolean)],t.JoyrideDirective.prototype,"startsInvisible",void 0),s([i.Input(),n("design:type","function"==typeof(E=void 0!==i.EventEmitter&&i.EventEmitter)?E:Object)],t.JoyrideDirective.prototype,"delayEmitter",void 0),s([i.Output(),n("design:type","function"==typeof(O=void 0!==i.EventEmitter&&i.EventEmitter)?O:Object)],t.JoyrideDirective.prototype,"prev",void 0),s([i.Output(),n("design:type","function"==typeof(j=void 0!==i.EventEmitter&&i.EventEmitter)?j:Object)],t.JoyrideDirective.prototype,"next",void 0),s([i.Output(),n("design:type","function"==typeof(_=void 0!==i.EventEmitter&&i.EventEmitter)?_:Object)],t.JoyrideDirective.prototype,"done",void 0),t.JoyrideDirective=s([i.Directive({selector:"joyrideStep, [joyrideStep]"}),c(5,i.Inject(i.PLATFORM_ID)),n("design:paramtypes",["function"==typeof(P=void 0!==t.JoyrideStepsContainerService&&t.JoyrideStepsContainerService)?P:Object,"function"==typeof(k=void 0!==i.ViewContainerRef&&i.ViewContainerRef)?k:Object,"function"==typeof(B=void 0!==t.DomRefService&&t.DomRefService)?B:Object,"function"==typeof(D=void 0!==o.Router&&o.Router)?D:Object,"function"==typeof(A=void 0!==t.TemplatesService&&t.TemplatesService)?A:Object,"function"==typeof(R="undefined"!=typeof Object&&Object)?R:Object])],t.JoyrideDirective),t.DocumentService=class{constructor(t){this.DOMService=t,this.setDocumentHeight(),document.elementsFromPoint||(document.elementsFromPoint=this.elementsFromPoint.bind(this))}getElementFixedTop(t){return t.nativeElement.getBoundingClientRect().top}getElementFixedLeft(t){return t.nativeElement.getBoundingClientRect().left}getElementAbsoluteTop(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().top+e.y}getElementAbsoluteLeft(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().left+e.x}setDocumentHeight(){this.documentHeight=this.calculateDocumentHeight()}getDocumentHeight(){return this.documentHeight}isParentScrollable(t){return this.getFirstScrollableParent(t.nativeElement)!==this.DOMService.getNativeDocument().body}isElementBeyondOthers(t,e,i){const r=e?this.getElementFixedLeft(t):this.getElementAbsoluteLeft(t),o=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t),s=r+t.nativeElement.getBoundingClientRect().width-1,n=o+t.nativeElement.getBoundingClientRect().height-1,c=this.DOMService.getNativeDocument().elementsFromPoint(r,o),h=this.DOMService.getNativeDocument().elementsFromPoint(s,n);return 0===c.length&&0===h.length?1:this.getFirstElementWithoutKeyword(c,i)!==t.nativeElement||this.getFirstElementWithoutKeyword(h,i)!==t.nativeElement?2:3}scrollIntoView(t,e){const i=this.getFirstScrollableParent(t.nativeElement),r=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t);i!==this.DOMService.getNativeDocument().body?i.scrollTo?i.scrollTo(0,r-150):i.scrollTop=r-150:this.DOMService.getNativeWindow().scrollTo(0,r-150)}scrollToTheTop(t){const e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,0):e.scrollTop=0:this.DOMService.getNativeWindow().scrollTo(0,0)}scrollToTheBottom(t){const e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight):e.scrollTop=e.scrollHeight-e.clientHeight:this.DOMService.getNativeWindow().scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight)}getFirstScrollableParent(t){const e=/(auto|scroll|overlay)/,i=(t,e)=>this.DOMService.getNativeWindow().getComputedStyle(t,null).getPropertyValue(e),r=t=>t&&t!==this.DOMService.getNativeDocument().body?(t=>e.test(i(t,"overflow")+i(t,"overflow-y")+i(t,"overflow-x")))(t)?t:r(t.parentNode):this.DOMService.getNativeDocument().body;return r(t)}calculateDocumentHeight(){const t=this.DOMService.getNativeDocument();return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight)}getScrollOffsets(){const t=this.DOMService.getNativeWindow(),e=this.DOMService.getNativeDocument();return null!=t.pageXOffset?{x:t.pageXOffset,y:t.pageYOffset}:"CSS1Compat"==e.compatMode?{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}:{x:e.body.scrollLeft,y:e.body.scrollTop}}elementsFromPoint(t,e){var i=[],r=void 0;do{const o=this.DOMService.getNativeDocument().elementFromPoint(t,e);o&&r!==o?(r=o,i.push(r),r.style.pointerEvents="none"):r=!1}while(r);return i.forEach(function(t){return t.style.pointerEvents="all"}),i}getFirstElementWithoutKeyword(t,e){for(;t[0]&&t[0].classList.toString().includes(e);)t.shift();return t[0]}},t.DocumentService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(I=void 0!==t.DomRefService&&t.DomRefService)?I:Object])],t.DocumentService),t.JoyrideBackdropService=class{constructor(t,e,i){this.documentService=t,this.optionsService=e,this.rendererFactory=i,this.lastXScroll=0,this.lastYScroll=0,this.setRenderer()}setRenderer(){this.renderer=this.rendererFactory.createRenderer(null,null)}draw(t){this.elementRef=t.targetViewContainer,this.targetAbsoluteTop=this.getTargetTotalTop(t),this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.currentBackdropContainer=this.renderer.createElement("div"),this.renderer.addClass(this.currentBackdropContainer,"backdrop-container"),this.renderer.setStyle(this.currentBackdropContainer,"position","fixed"),this.renderer.setStyle(this.currentBackdropContainer,"top","0px"),this.renderer.setStyle(this.currentBackdropContainer,"left","0px"),this.renderer.setStyle(this.currentBackdropContainer,"width","100%"),this.renderer.setStyle(this.currentBackdropContainer,"height","100%"),this.renderer.setStyle(this.currentBackdropContainer,"z-index","1000"),this.renderer.setAttribute(this.currentBackdropContainer,"id","backdrop-"+t.name),this.backdropContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropContent,"backdrop-content"),this.renderer.setStyle(this.backdropContent,"position","relative"),this.renderer.setStyle(this.backdropContent,"height","100%"),this.renderer.setStyle(this.backdropContent,"display","flex"),this.renderer.setStyle(this.backdropContent,"flex-direction","column"),this.renderer.appendChild(this.currentBackdropContainer,this.backdropContent),this.backdropTop=this.renderer.createElement("div"),this.renderer.addClass(this.backdropTop,"joyride-backdrop"),this.renderer.addClass(this.backdropTop,"backdrop-top"),this.renderer.setStyle(this.backdropTop,"width","100%"),this.renderer.setStyle(this.backdropTop,"height",this.targetAbsoluteTop-this.lastYScroll+"px"),this.renderer.setStyle(this.backdropTop,"flex-shrink","0"),this.renderer.setStyle(this.backdropTop,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropContent,this.backdropTop),this.backdropMiddleContainer=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContainer,"backdrop-middle-container"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"width","100%"),this.renderer.setStyle(this.backdropMiddleContainer,"flex-shrink","0"),this.renderer.appendChild(this.backdropContent,this.backdropMiddleContainer),this.backdropMiddleContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContent,"backdrop-middle-content"),this.renderer.setStyle(this.backdropMiddleContent,"display","flex"),this.renderer.setStyle(this.backdropMiddleContent,"width","100%"),this.renderer.setStyle(this.backdropMiddleContent,"height","100%"),this.renderer.appendChild(this.backdropMiddleContainer,this.backdropMiddleContent),this.leftBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.leftBackdrop,"joyride-backdrop"),this.renderer.addClass(this.leftBackdrop,"backdrop-left"),this.renderer.setStyle(this.leftBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.leftBackdrop,"width",this.targetAbsoluteLeft-this.lastXScroll+"px"),this.renderer.setStyle(this.leftBackdrop,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropMiddleContent,this.leftBackdrop),this.targetBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.targetBackdrop,"backdrop-target"),this.renderer.setStyle(this.targetBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px"),this.renderer.appendChild(this.backdropMiddleContent,this.targetBackdrop),this.rightBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.rightBackdrop,"joyride-backdrop"),this.renderer.addClass(this.rightBackdrop,"backdrop-right"),this.renderer.setStyle(this.rightBackdrop,"width","100%"),this.renderer.setStyle(this.rightBackdrop,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropMiddleContent,this.rightBackdrop),this.backdropBottom=this.renderer.createElement("div"),this.renderer.addClass(this.backdropBottom,"joyride-backdrop"),this.renderer.addClass(this.backdropBottom,"backdrop-bottom"),this.renderer.setStyle(this.backdropBottom,"width","100%"),this.renderer.setStyle(this.backdropBottom,"height","100%"),this.renderer.setStyle(this.backdropBottom,"background-color",`rgba(${this.optionsService.getBackdropColor()}, 0.7)`),this.renderer.appendChild(this.backdropContent,this.backdropBottom),this.removeLastBackdrop(),this.drawCurrentBackdrop(),this.lastBackdropContainer=this.currentBackdropContainer}remove(){this.removeLastBackdrop()}redrawTarget(t){this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.targetAbsoluteTop=this.getTargetTotalTop(t),this.handleVerticalScroll(t),this.handleHorizontalScroll(t)}getTargetTotalTop(t){let e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedTop(e.element):this.documentService.getElementAbsoluteTop(e.element)}getTargetTotalLeft(t){let e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedLeft(e.element):this.documentService.getElementAbsoluteLeft(e.element)}redraw(t,e){this.lastYScroll!==e.scrollY&&(this.lastYScroll=e.scrollY,this.elementRef&&this.handleVerticalScroll(t)),this.lastXScroll!==e.scrollX&&(this.lastXScroll=e.scrollX,this.elementRef&&this.handleHorizontalScroll(t))}handleHorizontalScroll(t){let e=t.isElementOrAncestorFixed?this.targetAbsoluteLeft:this.targetAbsoluteLeft-this.lastXScroll;e>=0?(this.renderer.setStyle(this.leftBackdrop,"width",e+"px"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px")):this.handleTargetPartialWidth(e)}handleTargetPartialWidth(t){this.renderer.setStyle(this.leftBackdrop,"width","0px");let e=this.elementRef.element.nativeElement.offsetWidth+t;e>=0?this.renderer.setStyle(this.targetBackdrop,"width",e+"px"):this.renderer.setStyle(this.targetBackdrop,"width","0px")}handleVerticalScroll(t){let e=t.isElementOrAncestorFixed?this.targetAbsoluteTop:this.targetAbsoluteTop-this.lastYScroll;e>=0?(this.renderer.setStyle(this.backdropTop,"height",e+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px")):this.handleTargetPartialHeight(e)}handleTargetPartialHeight(t){this.renderer.setStyle(this.backdropTop,"height","0px");let e=this.elementRef.element.nativeElement.offsetHeight+t;e>=0?this.renderer.setStyle(this.backdropMiddleContainer,"height",e+"px"):this.renderer.setStyle(this.backdropMiddleContainer,"height","0px")}removeLastBackdrop(){this.lastBackdropContainer&&(this.renderer.removeChild(document.body,this.lastBackdropContainer),this.lastBackdropContainer=void 0)}drawCurrentBackdrop(){this.renderer.appendChild(document.body,this.currentBackdropContainer)}},t.JoyrideBackdropService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(L=void 0!==t.DocumentService&&t.DocumentService)?L:Object,"function"==typeof(H=void 0!==t.JoyrideOptionsService&&t.JoyrideOptionsService)?H:Object,"function"==typeof(J=void 0!==i.RendererFactory2&&i.RendererFactory2)?J:Object])],t.JoyrideBackdropService);t.EventListenerService=class{constructor(t,i){this.rendererFactory=t,this.DOMService=i,this.scrollEvent=new e.Subject,this.resizeEvent=new e.Subject,this.renderer=t.createRenderer(null,null)}startListeningScrollEvents(){this.scrollUnlisten=this.renderer.listen("document","scroll",t=>{this.scrollEvent.next({scrollX:this.DOMService.getNativeWindow().pageXOffset,scrollY:this.DOMService.getNativeWindow().pageYOffset})})}startListeningResizeEvents(){this.resizeUnlisten=this.renderer.listen("window","resize",t=>{this.resizeEvent.next(t)})}stopListeningScrollEvents(){this.scrollUnlisten()}stopListeningResizeEvents(){this.resizeUnlisten()}},t.EventListenerService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(M=void 0!==i.RendererFactory2&&i.RendererFactory2)?M:Object,"function"==typeof(F=void 0!==t.DomRefService&&t.DomRefService)?F:Object])],t.EventListenerService);var Z,Q,tt,et,it,rt,ot,st,nt,ct,ht,pt;t.JoyrideStepComponent=class{constructor(t,e,i,r,o,s,n,c){this.injector=t,this.stepsContainerService=e,this.eventListenerService=i,this.documentService=r,this.renderer=o,this.logger=s,this.optionsService=n,this.templateService=c,this.stepWidth=200,this.stepHeight=200,this.showArrow=!0,this.arrowSize=lt,this.subscriptions=[]}ngOnInit(){this.joyrideStepService=this.injector.get(t.JoyrideStepService),this.documentHeight=this.documentService.getDocumentHeight(),this.subscriptions.push(this.subscribeToResizeEvents()),this.title=this.step.title.asObservable(),this.text=this.step.text.asObservable(),this.setCustomTemplates(),this.setCustomTexts(),this.counter=this.getCounter(),this.isCounterVisible=this.optionsService.isCounterVisible(),this.isPrevButtonVisible=this.optionsService.isPrevButtonVisible(),this.themeColor=this.optionsService.getThemeColor(),this.text&&this.text.subscribe(t=>this.checkRedraw(t)),this.title&&this.title.subscribe(t=>this.checkRedraw(t))}ngAfterViewInit(){if(this.isCustomized())this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","90vw"),this.updateStepDimensions();else{this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","400px");let t=this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth,this.stepContainer.nativeElement.clientHeight,1.212);t=this.adjustDimensions(t.width,t.height),this.stepWidth=t.width,this.stepHeight=t.height,this.renderer.setStyle(this.stepContainer.nativeElement,"width",this.stepWidth+"px"),this.renderer.setStyle(this.stepContainer.nativeElement,"height",this.stepHeight+"px")}this.drawStep()}checkRedraw(t){null!=t&&setTimeout(()=>{this.redrawStep()},2)}isCustomized(){return this.step.stepContent||this.templateService.getCounter()||this.templateService.getPrevButton()||this.templateService.getNextButton()||this.templateService.getDoneButton()}setCustomTexts(){const t=this.optionsService.getCustomTexts();this.prevText=t.prev,this.nextText=t.next,this.doneText=t.done}drawStep(){let t=this.step.isElementOrAncestorFixed?"fixed":"absolute";this.renderer.setStyle(this.stepHolder.nativeElement,"position",t),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",this.step.transformCssStyle),this.targetWidth=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width,this.targetHeight=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height,this.targetAbsoluteLeft="fixed"===t?this.documentService.getElementFixedLeft(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element),this.targetAbsoluteTop="fixed"===t?this.documentService.getElementFixedTop(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element),this.setStepStyle()}getCounter(){let t=this.stepsContainerService.getStepNumber(this.step.name),e=this.stepsContainerService.getStepsCount();return this.counterData={step:t,total:e},t+"/"+e}setCustomTemplates(){this.customContent=this.step.stepContent,this.ctx=this.step.stepContentParams,this.customPrevButton=this.templateService.getPrevButton(),this.customNextButton=this.templateService.getNextButton(),this.customDoneButton=this.templateService.getDoneButton(),this.customCounter=this.templateService.getCounter()}prev(){this.joyrideStepService.prev()}next(){this.joyrideStepService.next()}close(){this.joyrideStepService.close()}isFirstStep(){return 1===this.stepsContainerService.getStepNumber(this.step.name)}isLastStep(){return this.stepsContainerService.getStepNumber(this.step.name)===this.stepsContainerService.getStepsCount()}setStepStyle(){switch(this.step.position){case"top":this.setStyleTop();break;case"bottom":this.setStyleBottom();break;case"right":this.setStyleRight();break;case"left":this.setStyleLeft();break;case"center":this.setStyleCenter();break;default:this.setStyleBottom()}}setStyleTop(){this.stepsContainerService.updatePosition(this.step.name,"top"),this.topPosition=this.targetAbsoluteTop-at-this.stepHeight,this.stepAbsoluteTop=this.targetAbsoluteTop-at-this.stepHeight,this.arrowTopPosition=this.stepHeight,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="bottom",this.autofixTopPosition()}setStyleRight(){this.stepsContainerService.updatePosition(this.step.name,"right"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft+this.targetWidth+at,this.stepAbsoluteLeft=this.targetAbsoluteLeft+this.targetWidth+at,this.arrowLeftPosition=-this.arrowSize,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="left",this.autofixRightPosition()}setStyleBottom(){this.stepsContainerService.updatePosition(this.step.name,"bottom"),this.topPosition=this.targetAbsoluteTop+this.targetHeight+at,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight+at,this.arrowTopPosition=-this.arrowSize,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="top",this.autofixBottomPosition()}setStyleLeft(){this.stepsContainerService.updatePosition(this.step.name,"left"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft-this.stepWidth-at,this.stepAbsoluteLeft=this.targetAbsoluteLeft-this.stepWidth-at,this.arrowLeftPosition=this.stepWidth,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="right",this.autofixLeftPosition()}setStyleCenter(){this.renderer.setStyle(this.stepHolder.nativeElement,"position","fixed"),this.renderer.setStyle(this.stepHolder.nativeElement,"top","50%"),this.renderer.setStyle(this.stepHolder.nativeElement,"left","50%"),this.updateStepDimensions(),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",`translate(-${this.stepWidth/2}px, -${this.stepHeight/2}px)`),this.showArrow=!1}adjustLeftPosition(){this.leftPosition<0&&(this.arrowLeftPosition=this.arrowLeftPosition+this.leftPosition-2,this.leftPosition=2)}adjustRightPosition(){let t=document.body.clientWidth;if(this.stepAbsoluteLeft+this.stepWidth>t){let e=this.leftPosition-(this.stepAbsoluteLeft+this.stepWidth+5-t),i=e-this.leftPosition;this.leftPosition=e,this.arrowLeftPosition=this.arrowLeftPosition-i}}adjustTopPosition(){this.stepAbsoluteTop<0&&(this.arrowTopPosition=this.arrowTopPosition+this.topPosition-2,this.topPosition=2)}adjustBottomPosition(){if(this.stepAbsoluteTop+this.stepHeight>this.documentHeight){let t=this.topPosition-(this.stepAbsoluteTop+this.stepHeight+5-this.documentHeight),e=t-this.topPosition;this.topPosition=t,this.arrowTopPosition=this.arrowTopPosition-e}}autofixTopPosition(){this.positionAlreadyFixed?this.logger.warn("No step positions found for this step. The step will be centered."):this.targetAbsoluteTop-this.stepHeight-this.arrowSize<0&&(this.positionAlreadyFixed=!0,this.setStyleRight())}autofixRightPosition(){this.targetAbsoluteLeft+this.targetWidth+this.stepWidth+this.arrowSize>document.body.clientWidth&&this.setStyleBottom()}autofixBottomPosition(){this.targetAbsoluteTop+this.stepHeight+this.arrowSize+this.targetHeight>this.documentHeight&&this.setStyleLeft()}autofixLeftPosition(){this.targetAbsoluteLeft-this.stepWidth-this.arrowSize<0&&this.setStyleTop()}subscribeToResizeEvents(){return this.eventListenerService.resizeEvent.subscribe(()=>{this.redrawStep()})}redrawStep(){this.updateStepDimensions(),this.drawStep()}getDimensionsByAspectRatio(t,e,i){let r=(t+e)/(1+i);return{width:r*i,height:r}}adjustDimensions(t,e){let i=t,r=e;return t>400?r=t*e/(i=400):t<200&&(i=200,r=200/1.212),{width:i,height:r}}updateStepDimensions(){this.stepWidth=this.stepContainer.nativeElement.clientWidth,this.stepHeight=this.stepContainer.nativeElement.clientHeight}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}},s([i.Input(),n("design:type","function"==typeof(N=void 0!==h&&h)?N:Object)],t.JoyrideStepComponent.prototype,"step",void 0),s([i.ViewChild("stepHolder",{static:!0}),n("design:type","function"==typeof(W=void 0!==i.ElementRef&&i.ElementRef)?W:Object)],t.JoyrideStepComponent.prototype,"stepHolder",void 0),s([i.ViewChild("stepContainer",{static:!0}),n("design:type","function"==typeof(V=void 0!==i.ElementRef&&i.ElementRef)?V:Object)],t.JoyrideStepComponent.prototype,"stepContainer",void 0),t.JoyrideStepComponent=s([i.Component({selector:"joyride-step",template:'<div #stepHolder class="joyride-step__holder" [id]="\'joyride-step-\' + step.name" [style.top.px]="topPosition" [style.left.px]="leftPosition">\n    <joyride-arrow *ngIf="showArrow" class="joyride-step__arrow" [position]="arrowPosition" [style.top.px]="arrowTopPosition"\n        [style.left.px]="arrowLeftPosition"></joyride-arrow>\n    <div #stepContainer class="joyride-step__container">\n        <joy-close-button class="joyride-step__close" (click)="close()"></joy-close-button>\n        <div class="joyride-step__header">\n            <div class="joyride-step__title" [style.color]="themeColor">{{ title | async }}</div>\n        </div>\n        <div class="joyride-step__body">\n            <ng-container *ngTemplateOutlet="customContent ? customContent : defaultContent; context: ctx"></ng-container>\n            <ng-template #defaultContent>\n                {{ text | async }}\n            </ng-template>\n        </div>\n        <div class="joyride-step__footer">\n            <div *ngIf="isCounterVisible" class="joyride-step__counter-container">\n                <ng-container *ngTemplateOutlet="customCounter ? customCounter : defaultCounter; context: counterData"></ng-container>\n                <ng-template #defaultCounter>\n                    <div class="joyride-step__counter">{{ counter }}</div>\n                </ng-template>\n            </div>\n            <div class="joyride-step__buttons-container">\n                <div class="joyride-step__prev-container joyride-step__button" *ngIf="isPrevButtonVisible && !isFirstStep()" (click)="prev()">\n                    <ng-container *ngTemplateOutlet="customPrevButton ? customPrevButton : defaultPrevButton"></ng-container>\n                    <ng-template #defaultPrevButton>\n                        <joyride-button class="joyride-step__prev-button" [color]="themeColor">{{ prevText | async }}</joyride-button>\n                    </ng-template>\n                </div>\n                <div class="joyride-step__next-container joyride-step__button" *ngIf="!isLastStep(); else doneButton" (click)="next()">\n                    <ng-container *ngTemplateOutlet="customNextButton ? customNextButton : defaulNextButton"></ng-container>\n                    <ng-template #defaulNextButton>\n                        <joyride-button [color]="themeColor">{{ nextText | async }}</joyride-button>\n                    </ng-template>\n                </div>\n                <ng-template #doneButton>\n                    <div class="joyride-step__done-container joyride-step__button" (click)="close()">\n                        <ng-container *ngTemplateOutlet="customDoneButton ? customDoneButton : defaultDoneButton"></ng-container>\n                        <ng-template #defaultDoneButton>\n                            <joyride-button class="joyride-step__done-button" [color]="themeColor">{{ doneText | async }}</joyride-button>\n                        </ng-template>\n                    </div>\n                </ng-template>\n            </div>\n        </div>\n    </div>\n</div>',styles:[".joyride-step__holder {\n  position: absolute;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 16px;\n  z-index: 1001; }\n\n.joyride-step__arrow {\n  position: absolute;\n  left: 40px;\n  z-index: 1002; }\n\n.joyride-step__container {\n  box-sizing: border-box;\n  position: relative;\n  color: #000000;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 10px;\n  box-shadow: 0px 0px 30px 1px #000000; }\n\n.joyride-step__header {\n  display: flex;\n  align-items: center;\n  padding: 8px; }\n\n.joyride-step__title {\n  font-weight: bold;\n  font-size: 20px; }\n\n.joyride-step__close {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  width: 14px;\n  height: 14px;\n  cursor: pointer; }\n\n.joyride-step__body {\n  text-align: left;\n  padding: 10px 8px; }\n\n.joyride-step__footer {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 8px; }\n\n.joyride-step__buttons-container {\n  display: flex;\n  flex-direction: row; }\n\n.joyride-step__button:first-child {\n  margin-right: 2.5px; }\n\n.joyride-step__button:last-child {\n  margin-left: 2.5px; }\n\n.joyride-step__counter {\n  font-weight: bold;\n  font-size: 14px; }\n\n.joyride-step__counter-container {\n  margin-right: 10px; }\n"],encapsulation:i.ViewEncapsulation.None}),n("design:paramtypes",["function"==typeof(z=void 0!==i.Injector&&i.Injector)?z:Object,"function"==typeof(U=void 0!==t.JoyrideStepsContainerService&&t.JoyrideStepsContainerService)?U:Object,"function"==typeof($=void 0!==t.EventListenerService&&t.EventListenerService)?$:Object,"function"==typeof(X=void 0!==t.DocumentService&&t.DocumentService)?X:Object,"function"==typeof(Y=void 0!==i.Renderer2&&i.Renderer2)?Y:Object,"function"==typeof(q=void 0!==t.LoggerService&&t.LoggerService)?q:Object,"function"==typeof(G=void 0!==t.JoyrideOptionsService&&t.JoyrideOptionsService)?G:Object,"function"==typeof(K=void 0!==t.TemplatesService&&t.TemplatesService)?K:Object])],t.JoyrideStepComponent),t.StepDrawerService=class{constructor(t,e,i){this.componentFactoryResolver=t,this.appRef=e,this.injector=i,this.refMap={}}draw(e){const i=this.componentFactoryResolver.resolveComponentFactory(t.JoyrideStepComponent).create(this.injector);this.appRef.attachView(i.hostView);const r=i.hostView.rootNodes[0];e.delayEmitter&&e.delayEmitter.subscribe(()=>{e.startsHidden?(r.hidden=!1,setTimeout(()=>{e.startsInvisible&&r.setAttribute("style","visibility: visible")},500)):r.setAttribute("style","visibility: visible")}),e.startsInvisible&&r.setAttribute("style","visibility: hidden"),e.startsHidden&&(r.hidden=!0),document.body.appendChild(r);const o=i.instance;o.step=e,i.changeDetectorRef.detectChanges(),e.stepInstance=o,this.refMap[e.name]=i}remove(t){this.appRef.detachView(this.refMap[t.name].hostView),this.refMap[t.name].destroy()}},t.StepDrawerService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(Z=void 0!==i.ComponentFactoryResolver&&i.ComponentFactoryResolver)?Z:Object,"function"==typeof(Q=void 0!==i.ApplicationRef&&i.ApplicationRef)?Q:Object,"function"==typeof(tt=void 0!==i.Injector&&i.Injector)?tt:Object])],t.StepDrawerService);const at=15,lt=10;t.JoyrideStepService=class{constructor(t,i,r,o,s,n,c,h,p){this.backDropService=t,this.eventListener=i,this.stepsContainerService=r,this.documentService=o,this.DOMService=s,this.stepDrawerService=n,this.optionsService=c,this.router=h,this.logger=p,this.winTopPosition=0,this.winBottomPosition=0,this.stepsObserver=new e.ReplaySubject,this.initViewportPositions(),this.subscribeToScrollEvents(),this.subscribeToResizeEvents()}initViewportPositions(){this.winTopPosition=0,this.winBottomPosition=this.DOMService.getNativeWindow().innerHeight-20}subscribeToScrollEvents(){this.eventListener.startListeningScrollEvents(),this.eventListener.scrollEvent.subscribe(t=>{this.winTopPosition=t.scrollY,this.winBottomPosition=this.winTopPosition+this.DOMService.getNativeWindow().innerHeight-20,this.currentStep&&this.backDropService.redraw(this.currentStep,t)})}subscribeToResizeEvents(){this.eventListener.resizeEvent.subscribe(()=>{this.currentStep&&this.backDropService.redrawTarget(this.currentStep)})}drawStep(t){t.position="NO_POSITION"===t.position?this.optionsService.getStepDefaultPosition():t.position,this.stepDrawerService.draw(t)}startTour(){return this.stepsObserver=new e.ReplaySubject,this.stepsContainerService.init(),this.documentService.setDocumentHeight(),this.tryShowStep(t.StepActionType.NEXT),this.eventListener.startListeningResizeEvents(),this.subscribeToStepsUpdates(),this.stepsObserver.asObservable()}close(){this.removeCurrentStep(),this.notifyTourIsFinished(),this.DOMService.getNativeWindow().scrollTo(0,0),this.eventListener.stopListeningResizeEvents(),this.backDropService.remove()}prev(){this.removeCurrentStep(),this.currentStep.prevCliked.emit(),this.tryShowStep(t.StepActionType.PREV)}next(){this.removeCurrentStep(),this.currentStep.nextClicked.emit(),this.tryShowStep(t.StepActionType.NEXT)}navigateToStepPage(t){let e=this.stepsContainerService.getStepRoute(t);e&&this.router.navigate([e])}subscribeToStepsUpdates(){this.stepsContainerService.stepHasBeenModified.subscribe(t=>{this.currentStep&&this.currentStep.name===t.name&&(this.currentStep=t)})}tryShowStep(t){this.navigateToStepPage(t);const e=this.optionsService.getWaitingTime();e>100&&this.backDropService.remove(),setTimeout(()=>{try{this.showStep(t)}catch(e){if(e instanceof u)this.tryShowStep(t);else{if(!(e instanceof v))throw new Error(e);this.logger.error("Forcing the tour closure: First or Last step not found in the DOM."),this.close()}}},e)}showStep(t){if(this.currentStep=this.stepsContainerService.get(t),null==this.currentStep)throw new u("");this.scrollIfElementBeyondOtherElements(),this.backDropService.draw(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible(),this.notifyStepClicked(t)}notifyStepClicked(t){let e={number:this.stepsContainerService.getStepNumber(this.currentStep.name),name:this.currentStep.name,route:this.currentStep.route,actionType:t};this.stepsObserver.next(e)}notifyTourIsFinished(){this.currentStep&&this.currentStep.tourDone.emit(),this.stepsObserver.complete()}removeCurrentStep(){this.currentStep&&this.stepDrawerService.remove(this.currentStep)}scrollIfStepAndTargetAreNotVisible(){this.scrollWhenTargetOrStepAreHiddenBottom(),this.scrollWhenTargetOrStepAreHiddenTop()}scrollWhenTargetOrStepAreHiddenBottom(){let t=this.getMaxTargetAndStepBottomPosition();t>this.winBottomPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winBottomPosition)}scrollWhenTargetOrStepAreHiddenTop(){let t=this.getMaxTargetAndStepTopPosition();t<this.winTopPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winTopPosition)}getMaxTargetAndStepBottomPosition(){let t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight:"bottom"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight+this.currentStep.stepInstance.stepHeight+lt+at:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.max(t+this.currentStep.stepInstance.targetHeight,t+this.currentStep.stepInstance.targetHeight/2+this.currentStep.stepInstance.stepHeight/2):void 0}getMaxTargetAndStepTopPosition(){let t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t-(this.currentStep.stepInstance.stepHeight+lt+at):"bottom"===this.currentStep.position?t:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.min(t,t+this.currentStep.stepInstance.targetHeight/2-this.currentStep.stepInstance.stepHeight/2):void 0}scrollIfElementBeyondOtherElements(){2===this.isElementBeyondOthers()&&this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element),2===this.isElementBeyondOthers()&&this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView()}isElementBeyondOthers(){return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed,"backdrop")}},t.JoyrideStepService=s([i.Injectable(),n("design:paramtypes",["function"==typeof(et=void 0!==t.JoyrideBackdropService&&t.JoyrideBackdropService)?et:Object,"function"==typeof(it=void 0!==t.EventListenerService&&t.EventListenerService)?it:Object,"function"==typeof(rt=void 0!==t.JoyrideStepsContainerService&&t.JoyrideStepsContainerService)?rt:Object,"function"==typeof(ot=void 0!==t.DocumentService&&t.DocumentService)?ot:Object,"function"==typeof(st=void 0!==t.DomRefService&&t.DomRefService)?st:Object,"function"==typeof(nt=void 0!==t.StepDrawerService&&t.StepDrawerService)?nt:Object,"function"==typeof(ct=void 0!==t.JoyrideOptionsService&&t.JoyrideOptionsService)?ct:Object,"function"==typeof(ht=void 0!==o.Router&&o.Router)?ht:Object,"function"==typeof(pt=void 0!==t.LoggerService&&t.LoggerService)?pt:Object])],t.JoyrideStepService);var dt=function(t,e){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function ut(t,e){function i(){this.constructor=t}dt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function vt(t){return"function"==typeof t}var ft=!1,mt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;ft=t},get useDeprecatedSynchronousErrorHandling(){return ft}};function gt(t){setTimeout(function(){throw t},0)}var St={closed:!0,next:function(t){},error:function(t){if(mt.useDeprecatedSynchronousErrorHandling)throw t;gt(t)},complete:function(){}},bt=Array.isArray||function(t){return t&&"number"==typeof t.length};function yt(t){return null!==t&&"object"==typeof t}function wt(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}wt.prototype=Object.create(Error.prototype);var Ct=wt,xt=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this._parentOrParents,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var s=0;s<i.length;++s){i[s].remove(this)}if(vt(r))try{r.call(this)}catch(t){e=t instanceof Ct?Tt(t.errors):[t]}if(bt(o)){s=-1;for(var n=o.length;++s<n;){var c=o[s];if(yt(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Ct?e=e.concat(Tt(t.errors)):e.push(t)}}}if(e)throw new Ct(e)}},t.prototype.add=function(e){var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var r=i;(i=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=i._parentOrParents;if(null===o)i._parentOrParents=this;else if(o instanceof t){if(o===this)return i;i._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return i;o.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function Tt(t){return t.reduce(function(t,e){return t.concat(e instanceof Ct?e.errors:e)},[])}var Et="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ot=function(t){function e(i,r,o){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=St;break;case 1:if(!i){s.destination=St;break}if("object"==typeof i){i instanceof e?(s.syncErrorThrowable=i.syncErrorThrowable,s.destination=i,i.add(s)):(s.syncErrorThrowable=!0,s.destination=new jt(s,i));break}default:s.syncErrorThrowable=!0,s.destination=new jt(s,i,r,o)}return s}return ut(e,t),e.prototype[Et]=function(){return this},e.create=function(t,i,r){var o=new e(t,i,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(xt),jt=function(t){function e(e,i,r,o){var s,n=t.call(this)||this;n._parentSubscriber=e;var c=n;return vt(i)?s=i:i&&(s=i.next,r=i.error,o=i.complete,i!==St&&(vt((c=Object.create(i)).unsubscribe)&&n.add(c.unsubscribe.bind(c)),c.unsubscribe=n.unsubscribe.bind(n))),n._context=c,n._next=s,n._error=r,n._complete=o,n}return ut(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;mt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=mt.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):gt(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;gt(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};mt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),mt.useDeprecatedSynchronousErrorHandling)throw t;gt(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!mt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return mt.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(gt(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Ot);"function"==typeof Symbol&&Symbol.observable;var _t;_t||(_t={});function Pt(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Pt.prototype=Object.create(Error.prototype);var kt=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new Bt(t,this.callback))},t}(),Bt=function(t){function e(e,i){var r=t.call(this,e)||this;return r.add(new xt(i)),r}return ut(e,t),e}(Ot);function Dt(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}Dt.prototype=Object.create(Error.prototype);var At,Rt,It,Lt,Ht;t.JoyrideService=class{constructor(t,e,i){this.platformId=t,this.stepService=e,this.optionsService=i,this.tourInProgress=!1}startTour(t){return r.isPlatformBrowser(this.platformId)?(this.tourInProgress||(this.tourInProgress=!0,t&&this.optionsService.setOptions(t),this.tour$=this.stepService.startTour().pipe((i=(()=>this.tourInProgress=!1),function(t){return t.lift(new kt(i))})),this.tour$.subscribe()),this.tour$):e.of(new class{});var i}closeTour(){this.isTourInProgress()&&this.stepService.close()}isTourInProgress(){return this.tourInProgress}},t.JoyrideService=s([i.Injectable(),c(0,i.Inject(i.PLATFORM_ID)),n("design:paramtypes",["function"==typeof(At="undefined"!=typeof Object&&Object)?At:Object,"function"==typeof(Rt=void 0!==t.JoyrideStepService&&t.JoyrideStepService)?Rt:Object,"function"==typeof(It=void 0!==t.JoyrideOptionsService&&t.JoyrideOptionsService)?It:Object])],t.JoyrideService),t.JoyrideButtonComponent=class{constructor(){this.clicked=new i.EventEmitter}onClick(){this.clicked.emit()}},s([i.Input(),n("design:type",String)],t.JoyrideButtonComponent.prototype,"color",void 0),s([i.Output(),n("design:type","function"==typeof(Lt=void 0!==i.EventEmitter&&i.EventEmitter)?Lt:Object)],t.JoyrideButtonComponent.prototype,"clicked",void 0),t.JoyrideButtonComponent=s([i.Component({selector:"joyride-button",template:"<button (mouseleave)=\"hover=false\" (mouseover)=\"hover=true\"\n    [ngStyle]=\"{'background-color': hover ? '#fff' : color, \n                'color': hover ? color : '#fff',\n                'border-color' : hover ? color : 'transparent'}\"\n    class=\"joyride-button\" (click)=\"onClick()\">\n    <ng-content></ng-content>\n</button>",styles:[".joyride-button {\n  text-transform: uppercase;\n  border: 2px solid transparent;\n  outline: none;\n  padding: 6px 12px;\n  font-size: 12px;\n  font-weight: bold;\n  color: white;\n  background-color: #3b5560;\n  cursor: pointer; }\n  .joyride-button:hover {\n    color: #3b5560;\n    border: 2px solid #3b5560;\n    background-color: white; }\n"]})],t.JoyrideButtonComponent),t.JoyrideCloseButtonComponent=class{},t.JoyrideCloseButtonComponent=s([i.Component({selector:"joy-close-button",template:'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">\n                <line x1="1" y1="24" \n                    x2="24" y2="1" \n                    stroke="black" \n                    stroke-width="3"/>\n                <line x1="1" y1="1" \n                    x2="24" y2="24" \n                    stroke="black" \n                    stroke-width="3"/>\n            </svg>'})],t.JoyrideCloseButtonComponent),t.JoyrideArrowComponent=class{constructor(){this.position="top"}},s([i.Input(),n("design:type",String)],t.JoyrideArrowComponent.prototype,"position",void 0),t.JoyrideArrowComponent=s([i.Component({selector:"joyride-arrow",template:"<div [class.joyride-arrow__top]=\"position == 'top'\"\n     [class.joyride-arrow__bottom]=\"position == 'bottom'\"\n     [class.joyride-arrow__left]=\"position == 'left'\"\n     [class.joyride-arrow__right]=\"position == 'right'\">\n</div>",styles:[".joyride-arrow__top {\n  border-left: 11px solid transparent;\n  border-right: 11px solid transparent;\n  border-bottom: 11px solid #ffffff; }\n\n.joyride-arrow__bottom {\n  border-left: 11px solid transparent;\n  border-right: 11px solid transparent;\n  border-top: 11px solid #ffffff; }\n\n.joyride-arrow__right {\n  border-left: 11px solid #ffffff;\n  border-bottom: 11px solid transparent;\n  border-top: 11px solid transparent; }\n\n.joyride-arrow__left {\n  border-right: 11px solid #ffffff;\n  border-top: 11px solid transparent;\n  border-bottom: 11px solid transparent; }\n"],encapsulation:i.ViewEncapsulation.None})],t.JoyrideArrowComponent);const Jt=o.RouterModule.forChild([]);t.JoyrideModule=Ht=class{static forRoot(){return{ngModule:Ht,providers:[t.JoyrideService,t.JoyrideStepService,t.JoyrideStepsContainerService,t.JoyrideBackdropService,t.EventListenerService,t.DocumentService,t.JoyrideOptionsService,t.StepDrawerService,t.DomRefService,t.LoggerService,t.TemplatesService]}}static forChild(){return{ngModule:Ht,providers:[]}}},t.JoyrideModule=Ht=s([i.NgModule({imports:[r.CommonModule,Jt],declarations:[t.JoyrideDirective,t.JoyrideStepComponent,t.JoyrideArrowComponent,t.JoyrideButtonComponent,t.JoyrideCloseButtonComponent],entryComponents:[t.JoyrideStepComponent],exports:[t.JoyrideDirective]})],t.JoyrideModule),t.routerModuleForChild=Jt,t.NO_POSITION="NO_POSITION",t.DISTANCE_FROM_TARGET=at,t.ARROW_SIZE=lt,t.Scroll=class{},t.DEFAULT_THEME_COLOR="#3b5560",t.STEP_DEFAULT_POSITION="bottom",t.DEFAULT_TIMEOUT_BETWEEN_STEPS=1,t.DEFAULT_TEXTS=p,t.ObservableCustomTexts=class{},t.DEFAULT_DISTANCE_FROM_MARGIN_TOP=2,t.DEFAULT_DISTANCE_FROM_MARGIN_LEFT=2,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-joyride.umd.js.map
